<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Enterprise-grade distributed service mesh for MCP agents. Kubernetes-native platform with zero-boilerplate dependency injection."><meta name=author content="MCP Mesh Contributors"><link href=https://dhyansraj.github.io/mcp-mesh/06-helm-deployment/05-best-practices/ rel=canonical><link href=../04-multi-environment/ rel=prev><link href=../troubleshooting/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>Best Practices - MCP Mesh</title><link rel=stylesheet href=../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../css/timeago.css><link rel=stylesheet href=../../assets/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Google Search Console Verification --><meta name=google-site-verification content=EtV7XZPdw0d9azFHor7Zq2BeuVZVnwSwD0zzGNMOUoM><!-- Sitemap for Search Engines --><link rel=sitemap type=application/xml title=Sitemap href=https://dhyansraj.github.io/mcp-mesh/sitemap.xml></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#helm-best-practices class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="MCP Mesh" class="md-header__button md-logo" aria-label="MCP Mesh" data-md-component=logo> <img src=../../assets/images/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> MCP Mesh </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Best Practices </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/dhyansraj/mcp-mesh title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> dhyansraj/mcp-mesh </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../01-getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../02-local-development/ class=md-tabs__link> Local Development </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../03-docker-deployment/ class=md-tabs__link> Deployment </a> </li> <li class=md-tabs__item> <a href=../../07-observability/01-prometheus-integration/ class=md-tabs__link> Observability </a> </li> <li class=md-tabs__item> <a href=../../architecture-and-design/ class=md-tabs__link> Reference </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="MCP Mesh" class="md-nav__button md-logo" aria-label="MCP Mesh" data-md-component=logo> <img src=../../assets/images/logo.svg alt=logo> </a> MCP Mesh </label> <div class=md-nav__source> <a href=https://github.com/dhyansraj/mcp-mesh title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> dhyansraj/mcp-mesh </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../01-getting-started/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../01-getting-started/01-prerequisites/ class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=../../01-getting-started/02-installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../01-getting-started/03-hello-world/ class=md-nav__link> <span class=md-ellipsis> Hello World </span> </a> </li> <li class=md-nav__item> <a href=../../01-getting-started/04-dependency-injection/ class=md-nav__link> <span class=md-ellipsis> Dependency Injection </span> </a> </li> <li class=md-nav__item> <a href=../../01-getting-started/05-first-agent/ class=md-nav__link> <span class=md-ellipsis> First Agent </span> </a> </li> <li class=md-nav__item> <a href=../../01-getting-started/06-llm-integration/ class=md-nav__link> <span class=md-ellipsis> LLM Integration </span> </a> </li> <li class=md-nav__item> <a href=../../01-getting-started/troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Local Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Local Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../02-local-development/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../02-local-development/01-environment-setup/ class=md-nav__link> <span class=md-ellipsis> Environment Setup </span> </a> </li> <li class=md-nav__item> <a href=../../02-local-development/02-local-registry/ class=md-nav__link> <span class=md-ellipsis> Local Registry </span> </a> </li> <li class=md-nav__item> <a href=../../02-local-development/03-debugging/ class=md-nav__link> <span class=md-ellipsis> Debugging </span> </a> </li> <li class=md-nav__item> <a href=../../02-local-development/04-hot-reload/ class=md-nav__link> <span class=md-ellipsis> Hot Reload </span> </a> </li> <li class=md-nav__item> <a href=../../02-local-development/05-testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../02-local-development/troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../03-docker-deployment/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../03-docker-deployment/01-building-images/ class=md-nav__link> <span class=md-ellipsis> Building Images </span> </a> </li> <li class=md-nav__item> <a href=../../03-docker-deployment/02-compose-setup/ class=md-nav__link> <span class=md-ellipsis> Compose Setup </span> </a> </li> <li class=md-nav__item> <a href=../../03-docker-deployment/03-multi-agent/ class=md-nav__link> <span class=md-ellipsis> Multi-Agent </span> </a> </li> <li class=md-nav__item> <a href=../../03-docker-deployment/04-networking/ class=md-nav__link> <span class=md-ellipsis> Networking </span> </a> </li> <li class=md-nav__item> <a href=../../03-docker-deployment/05-storage/ class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> <li class=md-nav__item> <a href=../../03-docker-deployment/troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex> <span class=md-ellipsis> Kubernetes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../04-kubernetes-basics/ class=md-nav__link> <span class=md-ellipsis> Basics </span> </a> </li> <li class=md-nav__item> <a href=../../04-kubernetes-basics/03-kubectl-deployment/ class=md-nav__link> <span class=md-ellipsis> kubectl Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../04-kubernetes-basics/04-kustomize.md class=md-nav__link> <span class=md-ellipsis> Kustomize </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex> <span class=md-ellipsis> Helm </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=true> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Helm </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../01-understanding-charts/ class=md-nav__link> <span class=md-ellipsis> Understanding Charts </span> </a> </li> <li class=md-nav__item> <a href=../02-umbrella-chart/ class=md-nav__link> <span class=md-ellipsis> Multi-Agent Deployment </span> </a> </li> <li class=md-nav__item> <a href=../03-customizing-values/ class=md-nav__link> <span class=md-ellipsis> Customizing Values </span> </a> </li> <li class=md-nav__item> <a href=../04-multi-environment/ class=md-nav__link> <span class=md-ellipsis> Multi-Environment </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Best Practices </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Best Practices </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#key-concepts class=md-nav__link> <span class=md-ellipsis> Key Concepts </span> </a> </li> <li class=md-nav__item> <a href=#step-by-step-guide class=md-nav__link> <span class=md-ellipsis> Step-by-Step Guide </span> </a> <nav class=md-nav aria-label="Step-by-Step Guide"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-chart-development-standards class=md-nav__link> <span class=md-ellipsis> Step 1: Chart Development Standards </span> </a> </li> <li class=md-nav__item> <a href=#step-2-values-schema-validation class=md-nav__link> <span class=md-ellipsis> Step 2: Values Schema Validation </span> </a> </li> <li class=md-nav__item> <a href=#step-3-template-best-practices class=md-nav__link> <span class=md-ellipsis> Step 3: Template Best Practices </span> </a> </li> <li class=md-nav__item> <a href=#step-4-security-best-practices class=md-nav__link> <span class=md-ellipsis> Step 4: Security Best Practices </span> </a> </li> <li class=md-nav__item> <a href=#step-5-performance-optimization class=md-nav__link> <span class=md-ellipsis> Step 5: Performance Optimization </span> </a> </li> <li class=md-nav__item> <a href=#step-6-operational-excellence class=md-nav__link> <span class=md-ellipsis> Step 6: Operational Excellence </span> </a> </li> <li class=md-nav__item> <a href=#step-7-gitops-integration class=md-nav__link> <span class=md-ellipsis> Step 7: GitOps Integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-options class=md-nav__link> <span class=md-ellipsis> Configuration Options </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> <nav class=md-nav aria-label=Examples> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-1-production-ready-chart class=md-nav__link> <span class=md-ellipsis> Example 1: Production-Ready Chart </span> </a> </li> <li class=md-nav__item> <a href=#example-2-chart-lifecycle-management class=md-nav__link> <span class=md-ellipsis> Example 2: Chart Lifecycle Management </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> <li class=md-nav__item> <a href=#common-pitfalls class=md-nav__link> <span class=md-ellipsis> Common Pitfalls </span> </a> <nav class=md-nav aria-label="Common Pitfalls"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pitfall-1-hardcoded-values class=md-nav__link> <span class=md-ellipsis> Pitfall 1: Hardcoded Values </span> </a> </li> <li class=md-nav__item> <a href=#pitfall-2-missing-resource-limits class=md-nav__link> <span class=md-ellipsis> Pitfall 2: Missing Resource Limits </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> <nav class=md-nav aria-label=Testing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#chart-unit-testing class=md-nav__link> <span class=md-ellipsis> Chart Unit Testing </span> </a> </li> <li class=md-nav__item> <a href=#integration-testing class=md-nav__link> <span class=md-ellipsis> Integration Testing </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring-and-debugging class=md-nav__link> <span class=md-ellipsis> Monitoring and Debugging </span> </a> <nav class=md-nav aria-label="Monitoring and Debugging"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#monitor-chart-performance class=md-nav__link> <span class=md-ellipsis> Monitor Chart Performance </span> </a> </li> <li class=md-nav__item> <a href=#debug-chart-issues class=md-nav__link> <span class=md-ellipsis> Debug Chart Issues </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#troubleshooting class=md-nav__link> <span class=md-ellipsis> üîß Troubleshooting </span> </a> <nav class=md-nav aria-label="üîß Troubleshooting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#issue-1-schema-validation-failures class=md-nav__link> <span class=md-ellipsis> Issue 1: Schema Validation Failures </span> </a> </li> <li class=md-nav__item> <a href=#issue-2-template-rendering-slow class=md-nav__link> <span class=md-ellipsis> Issue 2: Template Rendering Slow </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#known-limitations class=md-nav__link> <span class=md-ellipsis> ‚ö†Ô∏è Known Limitations </span> </a> </li> <li class=md-nav__item> <a href=#todo class=md-nav__link> <span class=md-ellipsis> üìù TODO </span> </a> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Observability </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../07-observability/01-prometheus-integration/ class=md-nav__link> <span class=md-ellipsis> Prometheus Integration </span> </a> </li> <li class=md-nav__item> <a href=../../07-observability/02-grafana-dashboards/ class=md-nav__link> <span class=md-ellipsis> Grafana Dashboards </span> </a> </li> <li class=md-nav__item> <a href=../../07-observability/03-distributed-tracing/ class=md-nav__link> <span class=md-ellipsis> Distributed Tracing </span> </a> </li> <li class=md-nav__item> <a href=../../07-observability/04-centralized-logging/ class=md-nav__link> <span class=md-ellipsis> Centralized Logging </span> </a> </li> <li class=md-nav__item> <a href=../../07-observability/05-alerting-slos/ class=md-nav__link> <span class=md-ellipsis> Alerting & SLOs </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture-and-design/ class=md-nav__link> <span class=md-ellipsis> Architecture & Design </span> </a> </li> <li class=md-nav__item> <a href=../../mesh-decorators/ class=md-nav__link> <span class=md-ellipsis> Mesh Decorators </span> </a> </li> <li class=md-nav__item> <a href=../../environment-variables/ class=md-nav__link> <span class=md-ellipsis> Environment Variables </span> </a> </li> <li class=md-nav__item> <a href=../../meshctl-cli/ class=md-nav__link> <span class=md-ellipsis> meshctl CLI </span> </a> </li> <li class=md-nav__item> <a href=../../enhanced-tag-matching-migration/ class=md-nav__link> <span class=md-ellipsis> Tag Matching Migration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../../03-docker-deployment/ class=md-path__link> <span class=md-ellipsis> Deployment </span> </a> </li> <li class=md-path__item> <a href=../ class=md-path__link> <span class=md-ellipsis> Helm </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <h1 id=helm-best-practices>Helm Best Practices<a class=headerlink href=#helm-best-practices title="Permanent link">&para;</a></h1> <blockquote> <p>Production-ready patterns and practices for MCP Mesh Helm deployments</p> </blockquote> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>This guide covers best practices for using Helm with MCP Mesh in production environments. You'll learn about chart development standards, security practices, performance optimization, and operational excellence. These practices are derived from real-world deployments and community standards.</p> <p>Following these best practices ensures reliable, secure, and maintainable Helm deployments at scale.</p> <h2 id=key-concepts>Key Concepts<a class=headerlink href=#key-concepts title="Permanent link">&para;</a></h2> <ul> <li><strong>Chart Standards</strong>: Following Helm community conventions</li> <li><strong>Security Hardening</strong>: Protecting deployments and secrets</li> <li><strong>Performance Optimization</strong>: Efficient chart rendering and deployment</li> <li><strong>Operational Excellence</strong>: Monitoring, upgrading, and troubleshooting</li> <li><strong>GitOps Integration</strong>: Declarative deployment workflows</li> </ul> <h2 id=step-by-step-guide>Step-by-Step Guide<a class=headerlink href=#step-by-step-guide title="Permanent link">&para;</a></h2> <h3 id=step-1-chart-development-standards>Step 1: Chart Development Standards<a class=headerlink href=#step-1-chart-development-standards title="Permanent link">&para;</a></h3> <p>Follow consistent patterns for chart development:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1># Chart.yaml - Comprehensive metadata</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v2</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mcp-mesh-agent</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>  </span><span class=no>A Helm chart for deploying MCP Mesh agents.</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>  </span><span class=no>This chart supports multiple agent types and configurations.</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">application</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1.2.3</span><span class=w> </span><span class=c1># Chart version (SemVer)</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=nt>appVersion</span><span class=p>:</span><span class=w> </span><span class=s>&quot;1.0.0&quot;</span><span class=w> </span><span class=c1># Application version</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=nt>keywords</span><span class=p>:</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mcp-mesh</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">microservices</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">service-mesh</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=nt>home</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/mcp-mesh/charts</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=nt>sources</span><span class=p>:</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/mcp-mesh/mcp-mesh</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=nt>maintainers</span><span class=p>:</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Platform Team</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=w>    </span><span class=nt>email</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">platform@mcp-mesh.io</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://mcp-mesh.io</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=nt>dependencies</span><span class=p>:</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">common</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a><span class=w>    </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;1.x.x&quot;</span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a><span class=w>    </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class=s>&quot;https://charts.bitnami.com/bitnami&quot;</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a><span class=nt>annotations</span><span class=p>:</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a><span class=w>  </span><span class=c1># Chart documentation</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a><span class=w>  </span><span class=s>&quot;artifacthub.io/readme&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a><span class=w>    </span><span class=no>https://raw.githubusercontent.com/mcp-mesh/charts/main/charts/mcp-mesh-agent/README.md</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a><span class=w>  </span><span class=c1># Security scanning</span>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a><span class=w>  </span><span class=s>&quot;artifacthub.io/containsSecurityUpdates&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;false&quot;</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a><span class=w>  </span><span class=c1># License</span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a><span class=w>  </span><span class=s>&quot;artifacthub.io/license&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;Apache-2.0&quot;</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a><span class=w>  </span><span class=c1># Operator compatibility</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a><span class=w>  </span><span class=s>&quot;artifacthub.io/operator&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a><span class=w>  </span><span class=c1># Recommendations</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a><span class=w>  </span><span class=s>&quot;artifacthub.io/recommendations&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a><span class=w>    </span><span class=no>- url: https://charts.mcp-mesh.io/mcp-mesh-registry</span>
</span></code></pre></div> <h3 id=step-2-values-schema-validation>Step 2: Values Schema Validation<a class=headerlink href=#step-2-values-schema-validation title="Permanent link">&para;</a></h3> <p>Implement JSON Schema for values validation:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1>// values.schema.json</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=p>{</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>&quot;$schema&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://json-schema.org/draft-07/schema#&quot;</span><span class=p>,</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;object&quot;</span><span class=p>,</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>  </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;agent&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;image&quot;</span><span class=p>],</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>  </span><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class=nt>&quot;replicaCount&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;integer&quot;</span><span class=p>,</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>      </span><span class=nt>&quot;minimum&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>      </span><span class=nt>&quot;maximum&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=p>,</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Number of agent replicas&quot;</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>    </span><span class=nt>&quot;image&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;object&quot;</span><span class=p>,</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>      </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;repository&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;tag&quot;</span><span class=p>],</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=w>      </span><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=w>        </span><span class=nt>&quot;repository&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=w>          </span><span class=nt>&quot;pattern&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^[a-z0-9-_/]+$&quot;</span><span class=p>,</span>
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a><span class=w>          </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Container image repository&quot;</span>
</span><span id=__span-1-21><a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-1-22><a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a><span class=w>        </span><span class=nt>&quot;tag&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-23><a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
</span><span id=__span-1-24><a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a><span class=w>          </span><span class=nt>&quot;pattern&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^[a-zA-Z0-9.-]+$&quot;</span><span class=p>,</span>
</span><span id=__span-1-25><a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a><span class=w>          </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Container image tag&quot;</span>
</span><span id=__span-1-26><a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-1-27><a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a><span class=w>        </span><span class=nt>&quot;pullPolicy&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-28><a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
</span><span id=__span-1-29><a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a><span class=w>          </span><span class=nt>&quot;enum&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;Always&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;IfNotPresent&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;Never&quot;</span><span class=p>],</span>
</span><span id=__span-1-30><a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a><span class=w>          </span><span class=nt>&quot;default&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;IfNotPresent&quot;</span>
</span><span id=__span-1-31><a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-1-32><a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-1-33><a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-1-34><a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a><span class=w>    </span><span class=nt>&quot;agent&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-35><a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;object&quot;</span><span class=p>,</span>
</span><span id=__span-1-36><a id=__codelineno-1-36 name=__codelineno-1-36 href=#__codelineno-1-36></a><span class=w>      </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
</span><span id=__span-1-37><a id=__codelineno-1-37 name=__codelineno-1-37 href=#__codelineno-1-37></a><span class=w>      </span><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-38><a id=__codelineno-1-38 name=__codelineno-1-38 href=#__codelineno-1-38></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-39><a id=__codelineno-1-39 name=__codelineno-1-39 href=#__codelineno-1-39></a><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
</span><span id=__span-1-40><a id=__codelineno-1-40 name=__codelineno-1-40 href=#__codelineno-1-40></a><span class=w>          </span><span class=nt>&quot;pattern&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^[a-z0-9-]+$&quot;</span><span class=p>,</span>
</span><span id=__span-1-41><a id=__codelineno-1-41 name=__codelineno-1-41 href=#__codelineno-1-41></a><span class=w>          </span><span class=nt>&quot;minLength&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-1-42><a id=__codelineno-1-42 name=__codelineno-1-42 href=#__codelineno-1-42></a><span class=w>          </span><span class=nt>&quot;maxLength&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>63</span><span class=p>,</span>
</span><span id=__span-1-43><a id=__codelineno-1-43 name=__codelineno-1-43 href=#__codelineno-1-43></a><span class=w>          </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Agent name (DNS-1123 subdomain)&quot;</span>
</span><span id=__span-1-44><a id=__codelineno-1-44 name=__codelineno-1-44 href=#__codelineno-1-44></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-1-45><a id=__codelineno-1-45 name=__codelineno-1-45 href=#__codelineno-1-45></a><span class=w>        </span><span class=nt>&quot;capabilities&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-46><a id=__codelineno-1-46 name=__codelineno-1-46 href=#__codelineno-1-46></a><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;array&quot;</span><span class=p>,</span>
</span><span id=__span-1-47><a id=__codelineno-1-47 name=__codelineno-1-47 href=#__codelineno-1-47></a><span class=w>          </span><span class=nt>&quot;items&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-48><a id=__codelineno-1-48 name=__codelineno-1-48 href=#__codelineno-1-48></a><span class=w>            </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
</span><span id=__span-1-49><a id=__codelineno-1-49 name=__codelineno-1-49 href=#__codelineno-1-49></a><span class=w>            </span><span class=nt>&quot;pattern&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^[a-z0-9_]+$&quot;</span>
</span><span id=__span-1-50><a id=__codelineno-1-50 name=__codelineno-1-50 href=#__codelineno-1-50></a><span class=w>          </span><span class=p>},</span>
</span><span id=__span-1-51><a id=__codelineno-1-51 name=__codelineno-1-51 href=#__codelineno-1-51></a><span class=w>          </span><span class=nt>&quot;minItems&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-1-52><a id=__codelineno-1-52 name=__codelineno-1-52 href=#__codelineno-1-52></a><span class=w>          </span><span class=nt>&quot;uniqueItems&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-1-53><a id=__codelineno-1-53 name=__codelineno-1-53 href=#__codelineno-1-53></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-1-54><a id=__codelineno-1-54 name=__codelineno-1-54 href=#__codelineno-1-54></a><span class=w>        </span><span class=nt>&quot;resources&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-55><a id=__codelineno-1-55 name=__codelineno-1-55 href=#__codelineno-1-55></a><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;object&quot;</span><span class=p>,</span>
</span><span id=__span-1-56><a id=__codelineno-1-56 name=__codelineno-1-56 href=#__codelineno-1-56></a><span class=w>          </span><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-57><a id=__codelineno-1-57 name=__codelineno-1-57 href=#__codelineno-1-57></a><span class=w>            </span><span class=nt>&quot;limits&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-58><a id=__codelineno-1-58 name=__codelineno-1-58 href=#__codelineno-1-58></a><span class=w>              </span><span class=nt>&quot;$ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;#/definitions/resourceRequirements&quot;</span>
</span><span id=__span-1-59><a id=__codelineno-1-59 name=__codelineno-1-59 href=#__codelineno-1-59></a><span class=w>            </span><span class=p>},</span>
</span><span id=__span-1-60><a id=__codelineno-1-60 name=__codelineno-1-60 href=#__codelineno-1-60></a><span class=w>            </span><span class=nt>&quot;requests&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-61><a id=__codelineno-1-61 name=__codelineno-1-61 href=#__codelineno-1-61></a><span class=w>              </span><span class=nt>&quot;$ref&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;#/definitions/resourceRequirements&quot;</span>
</span><span id=__span-1-62><a id=__codelineno-1-62 name=__codelineno-1-62 href=#__codelineno-1-62></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-1-63><a id=__codelineno-1-63 name=__codelineno-1-63 href=#__codelineno-1-63></a><span class=w>          </span><span class=p>}</span>
</span><span id=__span-1-64><a id=__codelineno-1-64 name=__codelineno-1-64 href=#__codelineno-1-64></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-1-65><a id=__codelineno-1-65 name=__codelineno-1-65 href=#__codelineno-1-65></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-1-66><a id=__codelineno-1-66 name=__codelineno-1-66 href=#__codelineno-1-66></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-67><a id=__codelineno-1-67 name=__codelineno-1-67 href=#__codelineno-1-67></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-1-68><a id=__codelineno-1-68 name=__codelineno-1-68 href=#__codelineno-1-68></a><span class=w>  </span><span class=nt>&quot;definitions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-69><a id=__codelineno-1-69 name=__codelineno-1-69 href=#__codelineno-1-69></a><span class=w>    </span><span class=nt>&quot;resourceRequirements&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-70><a id=__codelineno-1-70 name=__codelineno-1-70 href=#__codelineno-1-70></a><span class=w>      </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;object&quot;</span><span class=p>,</span>
</span><span id=__span-1-71><a id=__codelineno-1-71 name=__codelineno-1-71 href=#__codelineno-1-71></a><span class=w>      </span><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-72><a id=__codelineno-1-72 name=__codelineno-1-72 href=#__codelineno-1-72></a><span class=w>        </span><span class=nt>&quot;cpu&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-73><a id=__codelineno-1-73 name=__codelineno-1-73 href=#__codelineno-1-73></a><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
</span><span id=__span-1-74><a id=__codelineno-1-74 name=__codelineno-1-74 href=#__codelineno-1-74></a><span class=w>          </span><span class=nt>&quot;pattern&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^[0-9]+(\\.[0-9]+)?(m)?$&quot;</span>
</span><span id=__span-1-75><a id=__codelineno-1-75 name=__codelineno-1-75 href=#__codelineno-1-75></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-1-76><a id=__codelineno-1-76 name=__codelineno-1-76 href=#__codelineno-1-76></a><span class=w>        </span><span class=nt>&quot;memory&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-77><a id=__codelineno-1-77 name=__codelineno-1-77 href=#__codelineno-1-77></a><span class=w>          </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
</span><span id=__span-1-78><a id=__codelineno-1-78 name=__codelineno-1-78 href=#__codelineno-1-78></a><span class=w>          </span><span class=nt>&quot;pattern&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;^[0-9]+(\\.[0-9]+)?(Mi|Gi)$&quot;</span>
</span><span id=__span-1-79><a id=__codelineno-1-79 name=__codelineno-1-79 href=#__codelineno-1-79></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-1-80><a id=__codelineno-1-80 name=__codelineno-1-80 href=#__codelineno-1-80></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-1-81><a id=__codelineno-1-81 name=__codelineno-1-81 href=#__codelineno-1-81></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-82><a id=__codelineno-1-82 name=__codelineno-1-82 href=#__codelineno-1-82></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-1-83><a id=__codelineno-1-83 name=__codelineno-1-83 href=#__codelineno-1-83></a><span class=p>}</span>
</span></code></pre></div> <h3 id=step-3-template-best-practices>Step 3: Template Best Practices<a class=headerlink href=#step-3-template-best-practices title="Permanent link">&para;</a></h3> <p>Write maintainable and efficient templates:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># templates/deployment.yaml</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>include &quot;mcp-mesh-agent.fullname&quot; .</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Release.Namespace</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.labels&quot; . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.commonLabels</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.annotations&quot; . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.commonAnnotations</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=w>  </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if not .Values.autoscaling.enabled</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Values.replicaCount</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a><span class=w>  </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a><span class=w>  </span><span class=nt>revisionHistoryLimit</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Values.revisionHistoryLimit | default 10</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a><span class=w>  </span><span class=nt>selector</span><span class=p>:</span>
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span>
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.selectorLabels&quot; . | nindent 6</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a><span class=w>  </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.updateStrategy</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-26><a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a><span class=w>  </span><span class=nt>strategy</span><span class=p>:</span>
</span><span id=__span-2-27><a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-28><a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a><span class=w>  </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-29><a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a><span class=w>  </span><span class=nt>template</span><span class=p>:</span>
</span><span id=__span-2-30><a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-2-31><a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a><span class=w>      </span><span class=nt>annotations</span><span class=p>:</span>
</span><span id=__span-2-32><a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a><span class=w>        </span><span class=c1># Force pod restart on config change</span>
</span><span id=__span-2-33><a id=__codelineno-2-33 name=__codelineno-2-33 href=#__codelineno-2-33></a><span class=w>        </span><span class=nt>checksum/config</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>include (print $.Template.BasePath &quot;/configmap.yaml&quot;) . | sha256sum</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-34><a id=__codelineno-2-34 name=__codelineno-2-34 href=#__codelineno-2-34></a><span class=w>        </span><span class=nt>checksum/secret</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>include (print $.Template.BasePath &quot;/secret.yaml&quot;) . | sha256sum</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-35><a id=__codelineno-2-35 name=__codelineno-2-35 href=#__codelineno-2-35></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.podAnnotations</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-36><a id=__codelineno-2-36 name=__codelineno-2-36 href=#__codelineno-2-36></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-37><a id=__codelineno-2-37 name=__codelineno-2-37 href=#__codelineno-2-37></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-38><a id=__codelineno-2-38 name=__codelineno-2-38 href=#__codelineno-2-38></a><span class=w>      </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-2-39><a id=__codelineno-2-39 name=__codelineno-2-39 href=#__codelineno-2-39></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.selectorLabels&quot; . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-40><a id=__codelineno-2-40 name=__codelineno-2-40 href=#__codelineno-2-40></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.podLabels</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-41><a id=__codelineno-2-41 name=__codelineno-2-41 href=#__codelineno-2-41></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-42><a id=__codelineno-2-42 name=__codelineno-2-42 href=#__codelineno-2-42></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-43><a id=__codelineno-2-43 name=__codelineno-2-43 href=#__codelineno-2-43></a><span class=w>    </span><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-2-44><a id=__codelineno-2-44 name=__codelineno-2-44 href=#__codelineno-2-44></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.imagePullSecrets</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-45><a id=__codelineno-2-45 name=__codelineno-2-45 href=#__codelineno-2-45></a><span class=w>      </span><span class=nt>imagePullSecrets</span><span class=p>:</span>
</span><span id=__span-2-46><a id=__codelineno-2-46 name=__codelineno-2-46 href=#__codelineno-2-46></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-47><a id=__codelineno-2-47 name=__codelineno-2-47 href=#__codelineno-2-47></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-48><a id=__codelineno-2-48 name=__codelineno-2-48 href=#__codelineno-2-48></a><span class=w>      </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>include &quot;mcp-mesh-agent.serviceAccountName&quot; .</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-49><a id=__codelineno-2-49 name=__codelineno-2-49 href=#__codelineno-2-49></a><span class=w>      </span><span class=nt>automountServiceAccountToken</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Values.serviceAccount.automountToken | default false</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-50><a id=__codelineno-2-50 name=__codelineno-2-50 href=#__codelineno-2-50></a><span class=w>      </span><span class=nt>securityContext</span><span class=p>:</span>
</span><span id=__span-2-51><a id=__codelineno-2-51 name=__codelineno-2-51 href=#__codelineno-2-51></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml .Values.podSecurityContext | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-52><a id=__codelineno-2-52 name=__codelineno-2-52 href=#__codelineno-2-52></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.priorityClassName</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-53><a id=__codelineno-2-53 name=__codelineno-2-53 href=#__codelineno-2-53></a><span class=w>      </span><span class=nt>priorityClassName</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-54><a id=__codelineno-2-54 name=__codelineno-2-54 href=#__codelineno-2-54></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-55><a id=__codelineno-2-55 name=__codelineno-2-55 href=#__codelineno-2-55></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.hostAliases</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-56><a id=__codelineno-2-56 name=__codelineno-2-56 href=#__codelineno-2-56></a><span class=w>      </span><span class=nt>hostAliases</span><span class=p>:</span>
</span><span id=__span-2-57><a id=__codelineno-2-57 name=__codelineno-2-57 href=#__codelineno-2-57></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-58><a id=__codelineno-2-58 name=__codelineno-2-58 href=#__codelineno-2-58></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-59><a id=__codelineno-2-59 name=__codelineno-2-59 href=#__codelineno-2-59></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.initContainers</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-60><a id=__codelineno-2-60 name=__codelineno-2-60 href=#__codelineno-2-60></a><span class=w>      </span><span class=nt>initContainers</span><span class=p>:</span>
</span><span id=__span-2-61><a id=__codelineno-2-61 name=__codelineno-2-61 href=#__codelineno-2-61></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.renderTpl&quot; (dict &quot;value&quot; .Values.initContainers &quot;context&quot; $) | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-62><a id=__codelineno-2-62 name=__codelineno-2-62 href=#__codelineno-2-62></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-63><a id=__codelineno-2-63 name=__codelineno-2-63 href=#__codelineno-2-63></a><span class=w>      </span><span class=nt>containers</span><span class=p>:</span>
</span><span id=__span-2-64><a id=__codelineno-2-64 name=__codelineno-2-64 href=#__codelineno-2-64></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Chart.Name</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-65><a id=__codelineno-2-65 name=__codelineno-2-65 href=#__codelineno-2-65></a><span class=w>          </span><span class=nt>securityContext</span><span class=p>:</span>
</span><span id=__span-2-66><a id=__codelineno-2-66 name=__codelineno-2-66 href=#__codelineno-2-66></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml .Values.securityContext | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-67><a id=__codelineno-2-67 name=__codelineno-2-67 href=#__codelineno-2-67></a><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{%</span><span class=nv> </span><span class=s>raw</span><span class=nv> </span><span class=s>%}{{</span><span class=nv> </span><span class=s>.Values.image.repository</span><span class=nv> </span><span class=s>}}{%</span><span class=nv> </span><span class=s>endraw</span><span class=nv> </span><span class=s>%}:{%</span><span class=nv> </span><span class=s>raw</span><span class=nv> </span><span class=s>%}{{</span><span class=nv> </span><span class=s>.Values.image.tag</span><span class=nv> </span><span class=s>|</span><span class=nv> </span><span class=s>default</span><span class=nv> </span><span class=s>.Chart.AppVersion</span><span class=nv> </span><span class=s>}}{%</span><span class=nv> </span><span class=s>endraw</span><span class=nv> </span><span class=s>%}&quot;</span>
</span><span id=__span-2-68><a id=__codelineno-2-68 name=__codelineno-2-68 href=#__codelineno-2-68></a><span class=w>          </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Values.image.pullPolicy</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-69><a id=__codelineno-2-69 name=__codelineno-2-69 href=#__codelineno-2-69></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.command</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-70><a id=__codelineno-2-70 name=__codelineno-2-70 href=#__codelineno-2-70></a><span class=w>          </span><span class=nt>command</span><span class=p>:</span>
</span><span id=__span-2-71><a id=__codelineno-2-71 name=__codelineno-2-71 href=#__codelineno-2-71></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-72><a id=__codelineno-2-72 name=__codelineno-2-72 href=#__codelineno-2-72></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-73><a id=__codelineno-2-73 name=__codelineno-2-73 href=#__codelineno-2-73></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.args</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-74><a id=__codelineno-2-74 name=__codelineno-2-74 href=#__codelineno-2-74></a><span class=w>          </span><span class=nt>args</span><span class=p>:</span>
</span><span id=__span-2-75><a id=__codelineno-2-75 name=__codelineno-2-75 href=#__codelineno-2-75></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-76><a id=__codelineno-2-76 name=__codelineno-2-76 href=#__codelineno-2-76></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-77><a id=__codelineno-2-77 name=__codelineno-2-77 href=#__codelineno-2-77></a><span class=w>          </span><span class=nt>env</span><span class=p>:</span>
</span><span id=__span-2-78><a id=__codelineno-2-78 name=__codelineno-2-78 href=#__codelineno-2-78></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">POD_NAME</span>
</span><span id=__span-2-79><a id=__codelineno-2-79 name=__codelineno-2-79 href=#__codelineno-2-79></a><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span>
</span><span id=__span-2-80><a id=__codelineno-2-80 name=__codelineno-2-80 href=#__codelineno-2-80></a><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span>
</span><span id=__span-2-81><a id=__codelineno-2-81 name=__codelineno-2-81 href=#__codelineno-2-81></a><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">metadata.name</span>
</span><span id=__span-2-82><a id=__codelineno-2-82 name=__codelineno-2-82 href=#__codelineno-2-82></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">POD_NAMESPACE</span>
</span><span id=__span-2-83><a id=__codelineno-2-83 name=__codelineno-2-83 href=#__codelineno-2-83></a><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span>
</span><span id=__span-2-84><a id=__codelineno-2-84 name=__codelineno-2-84 href=#__codelineno-2-84></a><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span>
</span><span id=__span-2-85><a id=__codelineno-2-85 name=__codelineno-2-85 href=#__codelineno-2-85></a><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">metadata.namespace</span>
</span><span id=__span-2-86><a id=__codelineno-2-86 name=__codelineno-2-86 href=#__codelineno-2-86></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">POD_IP</span>
</span><span id=__span-2-87><a id=__codelineno-2-87 name=__codelineno-2-87 href=#__codelineno-2-87></a><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span>
</span><span id=__span-2-88><a id=__codelineno-2-88 name=__codelineno-2-88 href=#__codelineno-2-88></a><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span>
</span><span id=__span-2-89><a id=__codelineno-2-89 name=__codelineno-2-89 href=#__codelineno-2-89></a><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">status.podIP</span>
</span><span id=__span-2-90><a id=__codelineno-2-90 name=__codelineno-2-90 href=#__codelineno-2-90></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NODE_NAME</span>
</span><span id=__span-2-91><a id=__codelineno-2-91 name=__codelineno-2-91 href=#__codelineno-2-91></a><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span>
</span><span id=__span-2-92><a id=__codelineno-2-92 name=__codelineno-2-92 href=#__codelineno-2-92></a><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span>
</span><span id=__span-2-93><a id=__codelineno-2-93 name=__codelineno-2-93 href=#__codelineno-2-93></a><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">spec.nodeName</span>
</span><span id=__span-2-94><a id=__codelineno-2-94 name=__codelineno-2-94 href=#__codelineno-2-94></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.env</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-95><a id=__codelineno-2-95 name=__codelineno-2-95 href=#__codelineno-2-95></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.renderTpl&quot; (dict &quot;value&quot; .Values.env &quot;context&quot; $) | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-96><a id=__codelineno-2-96 name=__codelineno-2-96 href=#__codelineno-2-96></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-97><a id=__codelineno-2-97 name=__codelineno-2-97 href=#__codelineno-2-97></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if or .Values.envFrom .Values.agent.configMap .Values.agent.secret</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-98><a id=__codelineno-2-98 name=__codelineno-2-98 href=#__codelineno-2-98></a><span class=w>          </span><span class=nt>envFrom</span><span class=p>:</span>
</span><span id=__span-2-99><a id=__codelineno-2-99 name=__codelineno-2-99 href=#__codelineno-2-99></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.envFrom</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-100><a id=__codelineno-2-100 name=__codelineno-2-100 href=#__codelineno-2-100></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-101><a id=__codelineno-2-101 name=__codelineno-2-101 href=#__codelineno-2-101></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-102><a id=__codelineno-2-102 name=__codelineno-2-102 href=#__codelineno-2-102></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.agent.configMap</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-103><a id=__codelineno-2-103 name=__codelineno-2-103 href=#__codelineno-2-103></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>configMapRef</span><span class=p>:</span>
</span><span id=__span-2-104><a id=__codelineno-2-104 name=__codelineno-2-104 href=#__codelineno-2-104></a><span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>include &quot;mcp-mesh-agent.fullname&quot; .</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-105><a id=__codelineno-2-105 name=__codelineno-2-105 href=#__codelineno-2-105></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-106><a id=__codelineno-2-106 name=__codelineno-2-106 href=#__codelineno-2-106></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.agent.secret</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-107><a id=__codelineno-2-107 name=__codelineno-2-107 href=#__codelineno-2-107></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>secretRef</span><span class=p>:</span>
</span><span id=__span-2-108><a id=__codelineno-2-108 name=__codelineno-2-108 href=#__codelineno-2-108></a><span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>include &quot;mcp-mesh-agent.fullname&quot; .</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-109><a id=__codelineno-2-109 name=__codelineno-2-109 href=#__codelineno-2-109></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-110><a id=__codelineno-2-110 name=__codelineno-2-110 href=#__codelineno-2-110></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-111><a id=__codelineno-2-111 name=__codelineno-2-111 href=#__codelineno-2-111></a><span class=w>          </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-2-112><a id=__codelineno-2-112 name=__codelineno-2-112 href=#__codelineno-2-112></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
</span><span id=__span-2-113><a id=__codelineno-2-113 name=__codelineno-2-113 href=#__codelineno-2-113></a><span class=w>              </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Values.agent.port | default 8080</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-114><a id=__codelineno-2-114 name=__codelineno-2-114 href=#__codelineno-2-114></a><span class=w>              </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
</span><span id=__span-2-115><a id=__codelineno-2-115 name=__codelineno-2-115 href=#__codelineno-2-115></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.metrics.enabled</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-116><a id=__codelineno-2-116 name=__codelineno-2-116 href=#__codelineno-2-116></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">metrics</span>
</span><span id=__span-2-117><a id=__codelineno-2-117 name=__codelineno-2-117 href=#__codelineno-2-117></a><span class=w>              </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Values.metrics.port | default 9090</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-118><a id=__codelineno-2-118 name=__codelineno-2-118 href=#__codelineno-2-118></a><span class=w>              </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
</span><span id=__span-2-119><a id=__codelineno-2-119 name=__codelineno-2-119 href=#__codelineno-2-119></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-120><a id=__codelineno-2-120 name=__codelineno-2-120 href=#__codelineno-2-120></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- range .Values.extraPorts</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-121><a id=__codelineno-2-121 name=__codelineno-2-121 href=#__codelineno-2-121></a><span class=w>            </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.name</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-122><a id=__codelineno-2-122 name=__codelineno-2-122 href=#__codelineno-2-122></a><span class=w>              </span><span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.port</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-123><a id=__codelineno-2-123 name=__codelineno-2-123 href=#__codelineno-2-123></a><span class=w>              </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.protocol | default &quot;TCP&quot;</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-124><a id=__codelineno-2-124 name=__codelineno-2-124 href=#__codelineno-2-124></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-125><a id=__codelineno-2-125 name=__codelineno-2-125 href=#__codelineno-2-125></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.livenessProbe</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-126><a id=__codelineno-2-126 name=__codelineno-2-126 href=#__codelineno-2-126></a><span class=w>          </span><span class=nt>livenessProbe</span><span class=p>:</span>
</span><span id=__span-2-127><a id=__codelineno-2-127 name=__codelineno-2-127 href=#__codelineno-2-127></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-128><a id=__codelineno-2-128 name=__codelineno-2-128 href=#__codelineno-2-128></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-129><a id=__codelineno-2-129 name=__codelineno-2-129 href=#__codelineno-2-129></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.readinessProbe</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-130><a id=__codelineno-2-130 name=__codelineno-2-130 href=#__codelineno-2-130></a><span class=w>          </span><span class=nt>readinessProbe</span><span class=p>:</span>
</span><span id=__span-2-131><a id=__codelineno-2-131 name=__codelineno-2-131 href=#__codelineno-2-131></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-132><a id=__codelineno-2-132 name=__codelineno-2-132 href=#__codelineno-2-132></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-133><a id=__codelineno-2-133 name=__codelineno-2-133 href=#__codelineno-2-133></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.startupProbe</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-134><a id=__codelineno-2-134 name=__codelineno-2-134 href=#__codelineno-2-134></a><span class=w>          </span><span class=nt>startupProbe</span><span class=p>:</span>
</span><span id=__span-2-135><a id=__codelineno-2-135 name=__codelineno-2-135 href=#__codelineno-2-135></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-136><a id=__codelineno-2-136 name=__codelineno-2-136 href=#__codelineno-2-136></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-137><a id=__codelineno-2-137 name=__codelineno-2-137 href=#__codelineno-2-137></a><span class=w>          </span><span class=nt>resources</span><span class=p>:</span>
</span><span id=__span-2-138><a id=__codelineno-2-138 name=__codelineno-2-138 href=#__codelineno-2-138></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml .Values.resources | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-139><a id=__codelineno-2-139 name=__codelineno-2-139 href=#__codelineno-2-139></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.volumeMounts</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-140><a id=__codelineno-2-140 name=__codelineno-2-140 href=#__codelineno-2-140></a><span class=w>          </span><span class=nt>volumeMounts</span><span class=p>:</span>
</span><span id=__span-2-141><a id=__codelineno-2-141 name=__codelineno-2-141 href=#__codelineno-2-141></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-142><a id=__codelineno-2-142 name=__codelineno-2-142 href=#__codelineno-2-142></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-143><a id=__codelineno-2-143 name=__codelineno-2-143 href=#__codelineno-2-143></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.lifecycle</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-144><a id=__codelineno-2-144 name=__codelineno-2-144 href=#__codelineno-2-144></a><span class=w>          </span><span class=nt>lifecycle</span><span class=p>:</span>
</span><span id=__span-2-145><a id=__codelineno-2-145 name=__codelineno-2-145 href=#__codelineno-2-145></a><span class=w>            </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 12</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-146><a id=__codelineno-2-146 name=__codelineno-2-146 href=#__codelineno-2-146></a><span class=w>          </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-147><a id=__codelineno-2-147 name=__codelineno-2-147 href=#__codelineno-2-147></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.sidecars</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-148><a id=__codelineno-2-148 name=__codelineno-2-148 href=#__codelineno-2-148></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.renderTpl&quot; (dict &quot;value&quot; . &quot;context&quot; $) | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-149><a id=__codelineno-2-149 name=__codelineno-2-149 href=#__codelineno-2-149></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-150><a id=__codelineno-2-150 name=__codelineno-2-150 href=#__codelineno-2-150></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.volumes</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-151><a id=__codelineno-2-151 name=__codelineno-2-151 href=#__codelineno-2-151></a><span class=w>      </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-2-152><a id=__codelineno-2-152 name=__codelineno-2-152 href=#__codelineno-2-152></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-153><a id=__codelineno-2-153 name=__codelineno-2-153 href=#__codelineno-2-153></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-154><a id=__codelineno-2-154 name=__codelineno-2-154 href=#__codelineno-2-154></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.nodeSelector</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-155><a id=__codelineno-2-155 name=__codelineno-2-155 href=#__codelineno-2-155></a><span class=w>      </span><span class=nt>nodeSelector</span><span class=p>:</span>
</span><span id=__span-2-156><a id=__codelineno-2-156 name=__codelineno-2-156 href=#__codelineno-2-156></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-157><a id=__codelineno-2-157 name=__codelineno-2-157 href=#__codelineno-2-157></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-158><a id=__codelineno-2-158 name=__codelineno-2-158 href=#__codelineno-2-158></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.affinity</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-159><a id=__codelineno-2-159 name=__codelineno-2-159 href=#__codelineno-2-159></a><span class=w>      </span><span class=nt>affinity</span><span class=p>:</span>
</span><span id=__span-2-160><a id=__codelineno-2-160 name=__codelineno-2-160 href=#__codelineno-2-160></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-161><a id=__codelineno-2-161 name=__codelineno-2-161 href=#__codelineno-2-161></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-162><a id=__codelineno-2-162 name=__codelineno-2-162 href=#__codelineno-2-162></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.tolerations</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-163><a id=__codelineno-2-163 name=__codelineno-2-163 href=#__codelineno-2-163></a><span class=w>      </span><span class=nt>tolerations</span><span class=p>:</span>
</span><span id=__span-2-164><a id=__codelineno-2-164 name=__codelineno-2-164 href=#__codelineno-2-164></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-165><a id=__codelineno-2-165 name=__codelineno-2-165 href=#__codelineno-2-165></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-166><a id=__codelineno-2-166 name=__codelineno-2-166 href=#__codelineno-2-166></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.topologySpreadConstraints</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-167><a id=__codelineno-2-167 name=__codelineno-2-167 href=#__codelineno-2-167></a><span class=w>      </span><span class=nt>topologySpreadConstraints</span><span class=p>:</span>
</span><span id=__span-2-168><a id=__codelineno-2-168 name=__codelineno-2-168 href=#__codelineno-2-168></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-169><a id=__codelineno-2-169 name=__codelineno-2-169 href=#__codelineno-2-169></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-170><a id=__codelineno-2-170 name=__codelineno-2-170 href=#__codelineno-2-170></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.terminationGracePeriodSeconds</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-171><a id=__codelineno-2-171 name=__codelineno-2-171 href=#__codelineno-2-171></a><span class=w>      </span><span class=nt>terminationGracePeriodSeconds</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-172><a id=__codelineno-2-172 name=__codelineno-2-172 href=#__codelineno-2-172></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-173><a id=__codelineno-2-173 name=__codelineno-2-173 href=#__codelineno-2-173></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.dnsPolicy</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-174><a id=__codelineno-2-174 name=__codelineno-2-174 href=#__codelineno-2-174></a><span class=w>      </span><span class=nt>dnsPolicy</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-175><a id=__codelineno-2-175 name=__codelineno-2-175 href=#__codelineno-2-175></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-176><a id=__codelineno-2-176 name=__codelineno-2-176 href=#__codelineno-2-176></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- with .Values.dnsConfig</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-177><a id=__codelineno-2-177 name=__codelineno-2-177 href=#__codelineno-2-177></a><span class=w>      </span><span class=nt>dnsConfig</span><span class=p>:</span>
</span><span id=__span-2-178><a id=__codelineno-2-178 name=__codelineno-2-178 href=#__codelineno-2-178></a><span class=w>        </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- toYaml . | nindent 8</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-2-179><a id=__codelineno-2-179 name=__codelineno-2-179 href=#__codelineno-2-179></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span></code></pre></div> <h3 id=step-4-security-best-practices>Step 4: Security Best Practices<a class=headerlink href=#step-4-security-best-practices title="Permanent link">&para;</a></h3> <p>Implement comprehensive security measures:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># templates/podsecuritypolicy.yaml</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.podSecurityPolicy.enabled</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">policy/v1beta1</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PodSecurityPolicy</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>include &quot;mcp-mesh-agent.fullname&quot; .</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.labels&quot; . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>  </span><span class=nt>privileged</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>  </span><span class=nt>allowPrivilegeEscalation</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>  </span><span class=nt>requiredDropCapabilities</span><span class=p>:</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ALL</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>  </span><span class=nt>volumes</span><span class=p>:</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;configMap&#39;</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;emptyDir&#39;</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;projected&#39;</span>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;secret&#39;</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;downwardAPI&#39;</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&#39;persistentVolumeClaim&#39;</span>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=w>  </span><span class=nt>hostNetwork</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=w>  </span><span class=nt>hostIPC</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=w>  </span><span class=nt>hostPID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=w>  </span><span class=nt>runAsUser</span><span class=p>:</span>
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=w>    </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=s>&#39;MustRunAsNonRoot&#39;</span>
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=w>  </span><span class=nt>seLinux</span><span class=p>:</span>
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a><span class=w>    </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=s>&#39;RunAsAny&#39;</span>
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a><span class=w>  </span><span class=nt>supplementalGroups</span><span class=p>:</span>
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a><span class=w>    </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=s>&#39;RunAsAny&#39;</span>
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a><span class=w>  </span><span class=nt>fsGroup</span><span class=p>:</span>
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a><span class=w>    </span><span class=nt>rule</span><span class=p>:</span><span class=w> </span><span class=s>&#39;RunAsAny&#39;</span>
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a><span class=w>  </span><span class=nt>readOnlyRootFilesystem</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-3-33><a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-34><a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a>
</span><span id=__span-3-35><a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a><span class=nn>---</span>
</span><span id=__span-3-36><a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a><span class=c1># templates/networkpolicy.yaml</span>
</span><span id=__span-3-37><a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.networkPolicy.enabled</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-38><a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
</span><span id=__span-3-39><a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
</span><span id=__span-3-40><a id=__codelineno-3-40 name=__codelineno-3-40 href=#__codelineno-3-40></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-3-41><a id=__codelineno-3-41 name=__codelineno-3-41 href=#__codelineno-3-41></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>include &quot;mcp-mesh-agent.fullname&quot; .</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-42><a id=__codelineno-3-42 name=__codelineno-3-42 href=#__codelineno-3-42></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-3-43><a id=__codelineno-3-43 name=__codelineno-3-43 href=#__codelineno-3-43></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.labels&quot; . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-44><a id=__codelineno-3-44 name=__codelineno-3-44 href=#__codelineno-3-44></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-3-45><a id=__codelineno-3-45 name=__codelineno-3-45 href=#__codelineno-3-45></a><span class=w>  </span><span class=nt>podSelector</span><span class=p>:</span>
</span><span id=__span-3-46><a id=__codelineno-3-46 name=__codelineno-3-46 href=#__codelineno-3-46></a><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span>
</span><span id=__span-3-47><a id=__codelineno-3-47 name=__codelineno-3-47 href=#__codelineno-3-47></a><span class=w>      </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.selectorLabels&quot; . | nindent 6</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-48><a id=__codelineno-3-48 name=__codelineno-3-48 href=#__codelineno-3-48></a><span class=w>  </span><span class=nt>policyTypes</span><span class=p>:</span>
</span><span id=__span-3-49><a id=__codelineno-3-49 name=__codelineno-3-49 href=#__codelineno-3-49></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
</span><span id=__span-3-50><a id=__codelineno-3-50 name=__codelineno-3-50 href=#__codelineno-3-50></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Egress</span>
</span><span id=__span-3-51><a id=__codelineno-3-51 name=__codelineno-3-51 href=#__codelineno-3-51></a><span class=w>  </span><span class=nt>ingress</span><span class=p>:</span>
</span><span id=__span-3-52><a id=__codelineno-3-52 name=__codelineno-3-52 href=#__codelineno-3-52></a><span class=w>    </span><span class=c1># Allow traffic from registry</span>
</span><span id=__span-3-53><a id=__codelineno-3-53 name=__codelineno-3-53 href=#__codelineno-3-53></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>from</span><span class=p>:</span>
</span><span id=__span-3-54><a id=__codelineno-3-54 name=__codelineno-3-54 href=#__codelineno-3-54></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>podSelector</span><span class=p>:</span>
</span><span id=__span-3-55><a id=__codelineno-3-55 name=__codelineno-3-55 href=#__codelineno-3-55></a><span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span>
</span><span id=__span-3-56><a id=__codelineno-3-56 name=__codelineno-3-56 href=#__codelineno-3-56></a><span class=w>              </span><span class=nt>app.kubernetes.io/name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mcp-mesh-registry</span>
</span><span id=__span-3-57><a id=__codelineno-3-57 name=__codelineno-3-57 href=#__codelineno-3-57></a><span class=w>      </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-3-58><a id=__codelineno-3-58 name=__codelineno-3-58 href=#__codelineno-3-58></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
</span><span id=__span-3-59><a id=__codelineno-3-59 name=__codelineno-3-59 href=#__codelineno-3-59></a><span class=w>          </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Values.agent.port | default 8080</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-60><a id=__codelineno-3-60 name=__codelineno-3-60 href=#__codelineno-3-60></a><span class=w>    </span><span class=c1># Allow metrics scraping</span>
</span><span id=__span-3-61><a id=__codelineno-3-61 name=__codelineno-3-61 href=#__codelineno-3-61></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.metrics.enabled</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-62><a id=__codelineno-3-62 name=__codelineno-3-62 href=#__codelineno-3-62></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>from</span><span class=p>:</span>
</span><span id=__span-3-63><a id=__codelineno-3-63 name=__codelineno-3-63 href=#__codelineno-3-63></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>namespaceSelector</span><span class=p>:</span>
</span><span id=__span-3-64><a id=__codelineno-3-64 name=__codelineno-3-64 href=#__codelineno-3-64></a><span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span>
</span><span id=__span-3-65><a id=__codelineno-3-65 name=__codelineno-3-65 href=#__codelineno-3-65></a><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">monitoring</span>
</span><span id=__span-3-66><a id=__codelineno-3-66 name=__codelineno-3-66 href=#__codelineno-3-66></a><span class=w>      </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-3-67><a id=__codelineno-3-67 name=__codelineno-3-67 href=#__codelineno-3-67></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
</span><span id=__span-3-68><a id=__codelineno-3-68 name=__codelineno-3-68 href=#__codelineno-3-68></a><span class=w>          </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>.Values.metrics.port | default 9090</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-69><a id=__codelineno-3-69 name=__codelineno-3-69 href=#__codelineno-3-69></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-3-70><a id=__codelineno-3-70 name=__codelineno-3-70 href=#__codelineno-3-70></a><span class=w>  </span><span class=nt>egress</span><span class=p>:</span>
</span><span id=__span-3-71><a id=__codelineno-3-71 name=__codelineno-3-71 href=#__codelineno-3-71></a><span class=w>    </span><span class=c1># Allow DNS</span>
</span><span id=__span-3-72><a id=__codelineno-3-72 name=__codelineno-3-72 href=#__codelineno-3-72></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>to</span><span class=p>:</span>
</span><span id=__span-3-73><a id=__codelineno-3-73 name=__codelineno-3-73 href=#__codelineno-3-73></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>namespaceSelector</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span>
</span><span id=__span-3-74><a id=__codelineno-3-74 name=__codelineno-3-74 href=#__codelineno-3-74></a><span class=w>          </span><span class=nt>podSelector</span><span class=p>:</span>
</span><span id=__span-3-75><a id=__codelineno-3-75 name=__codelineno-3-75 href=#__codelineno-3-75></a><span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span>
</span><span id=__span-3-76><a id=__codelineno-3-76 name=__codelineno-3-76 href=#__codelineno-3-76></a><span class=w>              </span><span class=nt>k8s-app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-dns</span>
</span><span id=__span-3-77><a id=__codelineno-3-77 name=__codelineno-3-77 href=#__codelineno-3-77></a><span class=w>      </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-3-78><a id=__codelineno-3-78 name=__codelineno-3-78 href=#__codelineno-3-78></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">UDP</span>
</span><span id=__span-3-79><a id=__codelineno-3-79 name=__codelineno-3-79 href=#__codelineno-3-79></a><span class=w>          </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">53</span>
</span><span id=__span-3-80><a id=__codelineno-3-80 name=__codelineno-3-80 href=#__codelineno-3-80></a><span class=w>    </span><span class=c1># Allow registry access</span>
</span><span id=__span-3-81><a id=__codelineno-3-81 name=__codelineno-3-81 href=#__codelineno-3-81></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>to</span><span class=p>:</span>
</span><span id=__span-3-82><a id=__codelineno-3-82 name=__codelineno-3-82 href=#__codelineno-3-82></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>podSelector</span><span class=p>:</span>
</span><span id=__span-3-83><a id=__codelineno-3-83 name=__codelineno-3-83 href=#__codelineno-3-83></a><span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span>
</span><span id=__span-3-84><a id=__codelineno-3-84 name=__codelineno-3-84 href=#__codelineno-3-84></a><span class=w>              </span><span class=nt>app.kubernetes.io/name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mcp-mesh-registry</span>
</span><span id=__span-3-85><a id=__codelineno-3-85 name=__codelineno-3-85 href=#__codelineno-3-85></a><span class=w>      </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-3-86><a id=__codelineno-3-86 name=__codelineno-3-86 href=#__codelineno-3-86></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
</span><span id=__span-3-87><a id=__codelineno-3-87 name=__codelineno-3-87 href=#__codelineno-3-87></a><span class=w>          </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</span><span id=__span-3-88><a id=__codelineno-3-88 name=__codelineno-3-88 href=#__codelineno-3-88></a><span class=w>    </span><span class=c1># Allow external HTTPS</span>
</span><span id=__span-3-89><a id=__codelineno-3-89 name=__codelineno-3-89 href=#__codelineno-3-89></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>to</span><span class=p>:</span>
</span><span id=__span-3-90><a id=__codelineno-3-90 name=__codelineno-3-90 href=#__codelineno-3-90></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>namespaceSelector</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span>
</span><span id=__span-3-91><a id=__codelineno-3-91 name=__codelineno-3-91 href=#__codelineno-3-91></a><span class=w>      </span><span class=nt>ports</span><span class=p>:</span>
</span><span id=__span-3-92><a id=__codelineno-3-92 name=__codelineno-3-92 href=#__codelineno-3-92></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
</span><span id=__span-3-93><a id=__codelineno-3-93 name=__codelineno-3-93 href=#__codelineno-3-93></a><span class=w>          </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</span><span id=__span-3-94><a id=__codelineno-3-94 name=__codelineno-3-94 href=#__codelineno-3-94></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span></code></pre></div> <h3 id=step-5-performance-optimization>Step 5: Performance Optimization<a class=headerlink href=#step-5-performance-optimization title="Permanent link">&para;</a></h3> <p>Optimize chart rendering and deployment:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># templates/_helpers.tpl</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class="p p-Indicator">{{</span><span class=nv>/*</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=nv>Efficient helper functions with caching</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=nv>*/</span><span class="p p-Indicator">}}</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class="p p-Indicator">{{</span><span class=nv>/*</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=nv>Create a default fully qualified app name.</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=nv>We truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=nv>*/</span><span class="p p-Indicator">}}</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- define &quot;mcp-mesh-agent.fullname&quot; -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if .Values.fullnameOverride</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- .Values.fullnameOverride | trunc 63 | trimSuffix &quot;-&quot;</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- else</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- $name</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= default .Chart.Name .Values.nameOverride</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if contains $name .Release.Name</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- .Release.Name | trunc 63 | trimSuffix &quot;-&quot;</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- else</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- printf &quot;%s-%s&quot; .Release.Name $name | trunc 63 | trimSuffix &quot;-&quot;</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a><span class="p p-Indicator">{{</span><span class=nv>/*</span>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=nv>Render template with caching for performance</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=nv>*/</span><span class="p p-Indicator">}}</span>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- define &quot;mcp-mesh-agent.renderTpl&quot; -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- $value</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= .value -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- $context</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= .context -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if typeIs &quot;string&quot; $value -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- tpl $value $context -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- else -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-32><a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- tpl ($value | toYaml) $context -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-33><a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-34><a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-35><a id=__codelineno-4-35 name=__codelineno-4-35 href=#__codelineno-4-35></a>
</span><span id=__span-4-36><a id=__codelineno-4-36 name=__codelineno-4-36 href=#__codelineno-4-36></a><span class="p p-Indicator">{{</span><span class=nv>/*</span>
</span><span id=__span-4-37><a id=__codelineno-4-37 name=__codelineno-4-37 href=#__codelineno-4-37></a><span class=nv>Common labels with minimal computation</span>
</span><span id=__span-4-38><a id=__codelineno-4-38 name=__codelineno-4-38 href=#__codelineno-4-38></a><span class=nv>*/</span><span class="p p-Indicator">}}</span>
</span><span id=__span-4-39><a id=__codelineno-4-39 name=__codelineno-4-39 href=#__codelineno-4-39></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- define &quot;mcp-mesh-agent.labels&quot; -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-40><a id=__codelineno-4-40 name=__codelineno-4-40 href=#__codelineno-4-40></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- if not .labels_cached</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-41><a id=__codelineno-4-41 name=__codelineno-4-41 href=#__codelineno-4-41></a><span class="p p-Indicator">{{</span><span class=nv>- $_</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= set . &quot;labels_cached&quot; (dict</span>
</span><span id=__span-4-42><a id=__codelineno-4-42 name=__codelineno-4-42 href=#__codelineno-4-42></a><span class=w>  </span><span class=nv>&quot;helm.sh/chart&quot; (include &quot;mcp-mesh-agent.chart&quot; .)</span>
</span><span id=__span-4-43><a id=__codelineno-4-43 name=__codelineno-4-43 href=#__codelineno-4-43></a><span class=w>  </span><span class=nv>&quot;app.kubernetes.io/name&quot; (include &quot;mcp-mesh-agent.name&quot; .)</span>
</span><span id=__span-4-44><a id=__codelineno-4-44 name=__codelineno-4-44 href=#__codelineno-4-44></a><span class=w>  </span><span class=nv>&quot;app.kubernetes.io/instance&quot; .Release.Name</span>
</span><span id=__span-4-45><a id=__codelineno-4-45 name=__codelineno-4-45 href=#__codelineno-4-45></a><span class=w>  </span><span class=nv>&quot;app.kubernetes.io/version&quot; (.Chart.AppVersion | default &quot;0.3&quot; | quote)</span>
</span><span id=__span-4-46><a id=__codelineno-4-46 name=__codelineno-4-46 href=#__codelineno-4-46></a><span class=w>  </span><span class=nv>&quot;app.kubernetes.io/managed-by&quot; .Release.Service</span>
</span><span id=__span-4-47><a id=__codelineno-4-47 name=__codelineno-4-47 href=#__codelineno-4-47></a><span class=nv>)</span><span class=w> </span><span class="p p-Indicator">}}</span>
</span><span id=__span-4-48><a id=__codelineno-4-48 name=__codelineno-4-48 href=#__codelineno-4-48></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-49><a id=__codelineno-4-49 name=__codelineno-4-49 href=#__codelineno-4-49></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- range $key</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>$value</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= .labels_cached</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-50><a id=__codelineno-4-50 name=__codelineno-4-50 href=#__codelineno-4-50></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>$key</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>$value</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-51><a id=__codelineno-4-51 name=__codelineno-4-51 href=#__codelineno-4-51></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-4-52><a id=__codelineno-4-52 name=__codelineno-4-52 href=#__codelineno-4-52></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- end</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span></code></pre></div> <h3 id=step-6-operational-excellence>Step 6: Operational Excellence<a class=headerlink href=#step-6-operational-excellence title="Permanent link">&para;</a></h3> <p>Implement comprehensive operational practices:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Chart testing</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=c1># templates/tests/test-connection.yaml</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{%</span><span class=nv> </span><span class=s>raw</span><span class=nv> </span><span class=s>%}{{</span><span class=nv> </span><span class=s>include</span><span class=nv> </span><span class=s>&quot;</span><span class="l l-Scalar l-Scalar-Plain">mcp-mesh-agent.fullname&quot; . }}{% endraw %}-test-connection&quot;</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- include &quot;mcp-mesh-agent.labels&quot; . | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>    </span><span class=s>&quot;helm.sh/hook&quot;</span><span class="p p-Indicator">:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>  </span><span class=nt>containers</span><span class=p>:</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-health</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">curlimages/curl:7.85.0</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>      </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&#39;sh&#39;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&#39;-c&#39;</span><span class="p p-Indicator">]</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>      </span><span class=nt>args</span><span class=p>:</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>          </span><span class=no>echo &quot;Testing agent health endpoint...&quot;</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>          </span><span class=no>curl -f http://{% raw %}{{ include &quot;mcp-mesh-agent.fullname&quot; . }}{% endraw %}:{% raw %}{{ .Values.agent.port | default 8080 }}{% endraw %}/health</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=w>          </span><span class=no>echo &quot;Testing agent readiness...&quot;</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>          </span><span class=no>curl -f http://{% raw %}{{ include &quot;mcp-mesh-agent.fullname&quot; . }}{% endraw %}:{% raw %}{{ .Values.agent.port | default 8080 }}{% endraw %}/ready</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>          </span><span class=no>echo &quot;Testing metrics endpoint...&quot;</span>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=w>          </span><span class=no>{% raw %}{{- if .Values.metrics.enabled }}{% endraw %}</span>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=w>          </span><span class=no>curl -f http://{% raw %}{{ include &quot;mcp-mesh-agent.fullname&quot; . }}{% endraw %}:{% raw %}{{ .Values.metrics.port | default 9090 }}{% endraw %}/metrics</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=w>          </span><span class=no>{% raw %}{{- end }}{% endraw %}</span>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=w>          </span><span class=no>echo &quot;All tests passed!&quot;</span>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=w>  </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>
</span></code></pre></div> <p>Create comprehensive documentation:</p> <div class="language-markdown highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=gh># templates/NOTES.txt</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>{% raw %}{{- $fullName := include &quot;mcp-mesh-agent.fullname&quot; . -}}{% endraw %}
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>‚ú® MCP Mesh Agent {% raw %}{{ .Values.agent.name }}{% endraw %} has been deployed!
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>üìã Release Information:
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>Name: {% raw %}{{ .Release.Name }}{% endraw %}
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>Namespace: {% raw %}{{ .Release.Namespace }}{% endraw %}
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a>Version: {% raw %}{{ .Chart.Version }}{% endraw %}
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>Revision: {% raw %}{{ .Release.Revision }}{% endraw %}
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>üöÄ Application Details:
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>Agent Name: {% raw %}{{ .Values.agent.name }}{% endraw %}
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a>Replicas: {% raw %}{{ .Values.replicaCount }}{% endraw %}
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>Image: {% raw %}{{ .Values.image.repository }}{% endraw %}:{% raw %}{{ .Values.image.tag | default .Chart.AppVersion }}{% endraw %}
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a>{% raw %}{{- if .Values.agent.capabilities }}{% endraw %}
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a>Capabilities: {% raw %}{{ .Values.agent.capabilities | join &quot;, &quot; }}{% endraw %}
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>{% raw %}{{- end }}{% endraw %}
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>üìä Resources:
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>CPU Request: {% raw %}{{ .Values.resources.requests.cpu | default &quot;not set&quot; }}{% endraw %}
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a>Memory Request: {% raw %}{{ .Values.resources.requests.memory | default &quot;not set&quot; }}{% endraw %}
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a>CPU Limit: {% raw %}{{ .Values.resources.limits.cpu | default &quot;not set&quot; }}{% endraw %}
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a>Memory Limit: {% raw %}{{ .Values.resources.limits.memory | default &quot;not set&quot; }}{% endraw %}
</span><span id=__span-6-25><a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a>
</span><span id=__span-6-26><a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a>üîç Service Discovery:
</span><span id=__span-6-27><a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a>Internal DNS: {% raw %}{{ $fullName }}{% endraw %}.{% raw %}{{ .Release.Namespace }}{% endraw %}.svc.cluster.local
</span><span id=__span-6-28><a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a>Service Port: {% raw %}{{ .Values.service.port | default 8080 }}{% endraw %}
</span><span id=__span-6-29><a id=__codelineno-6-29 name=__codelineno-6-29 href=#__codelineno-6-29></a>
</span><span id=__span-6-30><a id=__codelineno-6-30 name=__codelineno-6-30 href=#__codelineno-6-30></a>{% raw %}{{- if .Values.ingress.enabled }}{% endraw %}
</span><span id=__span-6-31><a id=__codelineno-6-31 name=__codelineno-6-31 href=#__codelineno-6-31></a>üåê External Access:
</span><span id=__span-6-32><a id=__codelineno-6-32 name=__codelineno-6-32 href=#__codelineno-6-32></a>{% raw %}{{- range $host := .Values.ingress.hosts }}{% endraw %}
</span><span id=__span-6-33><a id=__codelineno-6-33 name=__codelineno-6-33 href=#__codelineno-6-33></a>{% raw %}{{- range .paths }}{% endraw %}
</span><span id=__span-6-34><a id=__codelineno-6-34 name=__codelineno-6-34 href=#__codelineno-6-34></a>URL: http{% raw %}{{ if $.Values.ingress.tls }}{% endraw %}s{% raw %}{{ end }}{% endraw %}://{% raw %}{{ $host.host }}{% endraw %}{% raw %}{{ .path }}{% endraw %}
</span><span id=__span-6-35><a id=__codelineno-6-35 name=__codelineno-6-35 href=#__codelineno-6-35></a>{% raw %}{{- end }}{% endraw %}
</span><span id=__span-6-36><a id=__codelineno-6-36 name=__codelineno-6-36 href=#__codelineno-6-36></a>{% raw %}{{- end }}{% endraw %}
</span><span id=__span-6-37><a id=__codelineno-6-37 name=__codelineno-6-37 href=#__codelineno-6-37></a>{% raw %}{{- else }}{% endraw %}
</span><span id=__span-6-38><a id=__codelineno-6-38 name=__codelineno-6-38 href=#__codelineno-6-38></a>üîí External Access: Disabled (ingress.enabled=false)
</span><span id=__span-6-39><a id=__codelineno-6-39 name=__codelineno-6-39 href=#__codelineno-6-39></a>{% raw %}{{- end }}{% endraw %}
</span><span id=__span-6-40><a id=__codelineno-6-40 name=__codelineno-6-40 href=#__codelineno-6-40></a>
</span><span id=__span-6-41><a id=__codelineno-6-41 name=__codelineno-6-41 href=#__codelineno-6-41></a>{% raw %}{{- if .Values.autoscaling.enabled }}{% endraw %}
</span><span id=__span-6-42><a id=__codelineno-6-42 name=__codelineno-6-42 href=#__codelineno-6-42></a>üìà Autoscaling:
</span><span id=__span-6-43><a id=__codelineno-6-43 name=__codelineno-6-43 href=#__codelineno-6-43></a>Min Replicas: {% raw %}{{ .Values.autoscaling.minReplicas }}{% endraw %}
</span><span id=__span-6-44><a id=__codelineno-6-44 name=__codelineno-6-44 href=#__codelineno-6-44></a>Max Replicas: {% raw %}{{ .Values.autoscaling.maxReplicas }}{% endraw %}
</span><span id=__span-6-45><a id=__codelineno-6-45 name=__codelineno-6-45 href=#__codelineno-6-45></a>Target CPU: {% raw %}{{ .Values.autoscaling.targetCPUUtilizationPercentage }}{% endraw %}%
</span><span id=__span-6-46><a id=__codelineno-6-46 name=__codelineno-6-46 href=#__codelineno-6-46></a>{% raw %}{{- end }}{% endraw %}
</span><span id=__span-6-47><a id=__codelineno-6-47 name=__codelineno-6-47 href=#__codelineno-6-47></a>
</span><span id=__span-6-48><a id=__codelineno-6-48 name=__codelineno-6-48 href=#__codelineno-6-48></a>üè• Health Checks:
</span><span id=__span-6-49><a id=__codelineno-6-49 name=__codelineno-6-49 href=#__codelineno-6-49></a>Liveness: curl http://{% raw %}{{ $fullName }}{% endraw %}:{% raw %}{{ .Values.agent.port | default 8080 }}{% endraw %}/health
</span><span id=__span-6-50><a id=__codelineno-6-50 name=__codelineno-6-50 href=#__codelineno-6-50></a>Readiness: curl http://{% raw %}{{ $fullName }}{% endraw %}:{% raw %}{{ .Values.agent.port | default 8080 }}{% endraw %}/ready
</span><span id=__span-6-51><a id=__codelineno-6-51 name=__codelineno-6-51 href=#__codelineno-6-51></a>{% raw %}{{- if .Values.metrics.enabled }}{% endraw %}
</span><span id=__span-6-52><a id=__codelineno-6-52 name=__codelineno-6-52 href=#__codelineno-6-52></a>Metrics: curl http://{% raw %}{{ $fullName }}{% endraw %}:{% raw %}{{ .Values.metrics.port | default 9090 }}{% endraw %}/metrics
</span><span id=__span-6-53><a id=__codelineno-6-53 name=__codelineno-6-53 href=#__codelineno-6-53></a>{% raw %}{{- end }}{% endraw %}
</span><span id=__span-6-54><a id=__codelineno-6-54 name=__codelineno-6-54 href=#__codelineno-6-54></a>
</span><span id=__span-6-55><a id=__codelineno-6-55 name=__codelineno-6-55 href=#__codelineno-6-55></a>üìù Common Operations:
</span><span id=__span-6-56><a id=__codelineno-6-56 name=__codelineno-6-56 href=#__codelineno-6-56></a>
</span><span id=__span-6-57><a id=__codelineno-6-57 name=__codelineno-6-57 href=#__codelineno-6-57></a><span class=k>1.</span> Check deployment status:
</span><span id=__span-6-58><a id=__codelineno-6-58 name=__codelineno-6-58 href=#__codelineno-6-58></a>   kubectl rollout status deployment/{% raw %}{{ $fullName }}{% endraw %} -n {% raw %}{{ .Release.Namespace }}{% endraw %}
</span><span id=__span-6-59><a id=__codelineno-6-59 name=__codelineno-6-59 href=#__codelineno-6-59></a>
</span><span id=__span-6-60><a id=__codelineno-6-60 name=__codelineno-6-60 href=#__codelineno-6-60></a><span class=k>2.</span> View logs:
</span><span id=__span-6-61><a id=__codelineno-6-61 name=__codelineno-6-61 href=#__codelineno-6-61></a>   kubectl logs -f deployment/{% raw %}{{ $fullName }}{% endraw %} -n {% raw %}{{ .Release.Namespace }}{% endraw %}
</span><span id=__span-6-62><a id=__codelineno-6-62 name=__codelineno-6-62 href=#__codelineno-6-62></a>
</span><span id=__span-6-63><a id=__codelineno-6-63 name=__codelineno-6-63 href=#__codelineno-6-63></a><span class=k>3.</span> Scale deployment:
</span><span id=__span-6-64><a id=__codelineno-6-64 name=__codelineno-6-64 href=#__codelineno-6-64></a>   kubectl scale deployment/{% raw %}{{ $fullName }}{% endraw %} --replicas=5 -n {% raw %}{{ .Release.Namespace }}{% endraw %}
</span><span id=__span-6-65><a id=__codelineno-6-65 name=__codelineno-6-65 href=#__codelineno-6-65></a>
</span><span id=__span-6-66><a id=__codelineno-6-66 name=__codelineno-6-66 href=#__codelineno-6-66></a><span class=k>4.</span> Port forward for local access:
</span><span id=__span-6-67><a id=__codelineno-6-67 name=__codelineno-6-67 href=#__codelineno-6-67></a>   kubectl port-forward deployment/{% raw %}{{ $fullName }}{% endraw %} 8080:{% raw %}{{ .Values.agent.port | default 8080 }}{% endraw %} -n {% raw %}{{ .Release.Namespace }}{% endraw %}
</span><span id=__span-6-68><a id=__codelineno-6-68 name=__codelineno-6-68 href=#__codelineno-6-68></a>
</span><span id=__span-6-69><a id=__codelineno-6-69 name=__codelineno-6-69 href=#__codelineno-6-69></a><span class=k>5.</span> Run tests:
</span><span id=__span-6-70><a id=__codelineno-6-70 name=__codelineno-6-70 href=#__codelineno-6-70></a>   helm test {% raw %}{{ .Release.Name }}{% endraw %} -n {% raw %}{{ .Release.Namespace }}{% endraw %}
</span><span id=__span-6-71><a id=__codelineno-6-71 name=__codelineno-6-71 href=#__codelineno-6-71></a>
</span><span id=__span-6-72><a id=__codelineno-6-72 name=__codelineno-6-72 href=#__codelineno-6-72></a>{% raw %}{{- if .Values.debug.enabled }}{% endraw %}
</span><span id=__span-6-73><a id=__codelineno-6-73 name=__codelineno-6-73 href=#__codelineno-6-73></a>‚ö†Ô∏è DEBUG MODE IS ENABLED - Not recommended for production!
</span><span id=__span-6-74><a id=__codelineno-6-74 name=__codelineno-6-74 href=#__codelineno-6-74></a>{% raw %}{{- end }}{% endraw %}
</span><span id=__span-6-75><a id=__codelineno-6-75 name=__codelineno-6-75 href=#__codelineno-6-75></a>
</span><span id=__span-6-76><a id=__codelineno-6-76 name=__codelineno-6-76 href=#__codelineno-6-76></a>For more information, visit: https://docs.mcp-mesh.io
</span></code></pre></div> <h3 id=step-7-gitops-integration>Step 7: GitOps Integration<a class=headerlink href=#step-7-gitops-integration title="Permanent link">&para;</a></h3> <p>Integrate with GitOps workflows:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># argocd/application.yaml</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Application</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mcp-mesh-platform</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>  </span><span class=nt>finalizers</span><span class=p>:</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">resources-finalizer.argocd.argoproj.io</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>  </span><span class=nt>project</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>  </span><span class=nt>source</span><span class=p>:</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>    </span><span class=nt>repoURL</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/mcp-mesh/deployments</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=w>    </span><span class=nt>targetRevision</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">HEAD</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">helm/mcp-mesh-platform</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=w>    </span><span class=nt>helm</span><span class=p>:</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=w>      </span><span class=nt>valueFiles</span><span class=p>:</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">values.yaml</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">values-production.yaml</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a><span class=w>      </span><span class=nt>parameters</span><span class=p>:</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">image.tag</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;1.0.0&quot;</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a><span class=w>  </span><span class=nt>destination</span><span class=p>:</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a><span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a><span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mcp-mesh</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a><span class=w>  </span><span class=nt>syncPolicy</span><span class=p>:</span>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a><span class=w>    </span><span class=nt>automated</span><span class=p>:</span>
</span><span id=__span-7-27><a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a><span class=w>      </span><span class=nt>prune</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-28><a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a><span class=w>      </span><span class=nt>selfHeal</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-7-29><a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a><span class=w>      </span><span class=nt>allowEmpty</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-7-30><a id=__codelineno-7-30 name=__codelineno-7-30 href=#__codelineno-7-30></a><span class=w>    </span><span class=nt>syncOptions</span><span class=p>:</span>
</span><span id=__span-7-31><a id=__codelineno-7-31 name=__codelineno-7-31 href=#__codelineno-7-31></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CreateNamespace=true</span>
</span><span id=__span-7-32><a id=__codelineno-7-32 name=__codelineno-7-32 href=#__codelineno-7-32></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PrunePropagationPolicy=foreground</span>
</span><span id=__span-7-33><a id=__codelineno-7-33 name=__codelineno-7-33 href=#__codelineno-7-33></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PruneLast=true</span>
</span><span id=__span-7-34><a id=__codelineno-7-34 name=__codelineno-7-34 href=#__codelineno-7-34></a><span class=w>    </span><span class=nt>retry</span><span class=p>:</span>
</span><span id=__span-7-35><a id=__codelineno-7-35 name=__codelineno-7-35 href=#__codelineno-7-35></a><span class=w>      </span><span class=nt>limit</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id=__span-7-36><a id=__codelineno-7-36 name=__codelineno-7-36 href=#__codelineno-7-36></a><span class=w>      </span><span class=nt>backoff</span><span class=p>:</span>
</span><span id=__span-7-37><a id=__codelineno-7-37 name=__codelineno-7-37 href=#__codelineno-7-37></a><span class=w>        </span><span class=nt>duration</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5s</span>
</span><span id=__span-7-38><a id=__codelineno-7-38 name=__codelineno-7-38 href=#__codelineno-7-38></a><span class=w>        </span><span class=nt>factor</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id=__span-7-39><a id=__codelineno-7-39 name=__codelineno-7-39 href=#__codelineno-7-39></a><span class=w>        </span><span class=nt>maxDuration</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3m</span>
</span><span id=__span-7-40><a id=__codelineno-7-40 name=__codelineno-7-40 href=#__codelineno-7-40></a><span class=w>  </span><span class=nt>revisionHistoryLimit</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</span></code></pre></div> <h2 id=configuration-options>Configuration Options<a class=headerlink href=#configuration-options title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Practice</th> <th>Configuration</th> <th>Impact</th> </tr> </thead> <tbody> <tr> <td>Schema Validation</td> <td><code>values.schema.json</code></td> <td>Prevents misconfigurations</td> </tr> <tr> <td>Security Policies</td> <td><code>podSecurityPolicy.enabled</code></td> <td>Enforces security standards</td> </tr> <tr> <td>Network Policies</td> <td><code>networkPolicy.enabled</code></td> <td>Controls traffic flow</td> </tr> <tr> <td>Resource Limits</td> <td><code>resources.limits</code></td> <td>Prevents resource exhaustion</td> </tr> <tr> <td>Monitoring</td> <td><code>metrics.enabled</code></td> <td>Enables observability</td> </tr> </tbody> </table> <h2 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h2> <h3 id=example-1-production-ready-chart>Example 1: Production-Ready Chart<a class=headerlink href=#example-1-production-ready-chart title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># values-production.yaml</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=c1># Production-ready configuration</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=c1># High availability</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=nt>replicaCount</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=c1># Resource management</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=nt>resources</span><span class=p>:</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>  </span><span class=nt>requests</span><span class=p>:</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s>&quot;512Mi&quot;</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s>&quot;250m&quot;</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>  </span><span class=nt>limits</span><span class=p>:</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=s>&quot;1Gi&quot;</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=s>&quot;500m&quot;</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=c1># Security hardening</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=nt>podSecurityContext</span><span class=p>:</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=w>  </span><span class=nt>runAsNonRoot</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=w>  </span><span class=nt>runAsUser</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10001</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=w>  </span><span class=nt>fsGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10001</span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a><span class=w>  </span><span class=nt>seccompProfile</span><span class=p>:</span>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">RuntimeDefault</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a>
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a><span class=nt>securityContext</span><span class=p>:</span>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=w>  </span><span class=nt>allowPrivilegeEscalation</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a><span class=w>  </span><span class=nt>readOnlyRootFilesystem</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=w>  </span><span class=nt>runAsNonRoot</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a><span class=w>  </span><span class=nt>runAsUser</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10001</span>
</span><span id=__span-8-29><a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a><span class=w>  </span><span class=nt>capabilities</span><span class=p>:</span>
</span><span id=__span-8-30><a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a><span class=w>    </span><span class=nt>drop</span><span class=p>:</span>
</span><span id=__span-8-31><a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ALL</span>
</span><span id=__span-8-32><a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a>
</span><span id=__span-8-33><a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a><span class=c1># Network policies</span>
</span><span id=__span-8-34><a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a><span class=nt>networkPolicy</span><span class=p>:</span>
</span><span id=__span-8-35><a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-36><a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a>
</span><span id=__span-8-37><a id=__codelineno-8-37 name=__codelineno-8-37 href=#__codelineno-8-37></a><span class=c1># Pod disruption budget</span>
</span><span id=__span-8-38><a id=__codelineno-8-38 name=__codelineno-8-38 href=#__codelineno-8-38></a><span class=nt>podDisruptionBudget</span><span class=p>:</span>
</span><span id=__span-8-39><a id=__codelineno-8-39 name=__codelineno-8-39 href=#__codelineno-8-39></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-40><a id=__codelineno-8-40 name=__codelineno-8-40 href=#__codelineno-8-40></a><span class=w>  </span><span class=nt>minAvailable</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id=__span-8-41><a id=__codelineno-8-41 name=__codelineno-8-41 href=#__codelineno-8-41></a>
</span><span id=__span-8-42><a id=__codelineno-8-42 name=__codelineno-8-42 href=#__codelineno-8-42></a><span class=c1># Monitoring</span>
</span><span id=__span-8-43><a id=__codelineno-8-43 name=__codelineno-8-43 href=#__codelineno-8-43></a><span class=nt>metrics</span><span class=p>:</span>
</span><span id=__span-8-44><a id=__codelineno-8-44 name=__codelineno-8-44 href=#__codelineno-8-44></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-45><a id=__codelineno-8-45 name=__codelineno-8-45 href=#__codelineno-8-45></a><span class=w>  </span><span class=nt>serviceMonitor</span><span class=p>:</span>
</span><span id=__span-8-46><a id=__codelineno-8-46 name=__codelineno-8-46 href=#__codelineno-8-46></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-47><a id=__codelineno-8-47 name=__codelineno-8-47 href=#__codelineno-8-47></a><span class=w>    </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
</span><span id=__span-8-48><a id=__codelineno-8-48 name=__codelineno-8-48 href=#__codelineno-8-48></a>
</span><span id=__span-8-49><a id=__codelineno-8-49 name=__codelineno-8-49 href=#__codelineno-8-49></a><span class=c1># Health checks</span>
</span><span id=__span-8-50><a id=__codelineno-8-50 name=__codelineno-8-50 href=#__codelineno-8-50></a><span class=nt>livenessProbe</span><span class=p>:</span>
</span><span id=__span-8-51><a id=__codelineno-8-51 name=__codelineno-8-51 href=#__codelineno-8-51></a><span class=w>  </span><span class=nt>httpGet</span><span class=p>:</span>
</span><span id=__span-8-52><a id=__codelineno-8-52 name=__codelineno-8-52 href=#__codelineno-8-52></a><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/health</span>
</span><span id=__span-8-53><a id=__codelineno-8-53 name=__codelineno-8-53 href=#__codelineno-8-53></a><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
</span><span id=__span-8-54><a id=__codelineno-8-54 name=__codelineno-8-54 href=#__codelineno-8-54></a><span class=w>  </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
</span><span id=__span-8-55><a id=__codelineno-8-55 name=__codelineno-8-55 href=#__codelineno-8-55></a><span class=w>  </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</span><span id=__span-8-56><a id=__codelineno-8-56 name=__codelineno-8-56 href=#__codelineno-8-56></a><span class=w>  </span><span class=nt>timeoutSeconds</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</span><span id=__span-8-57><a id=__codelineno-8-57 name=__codelineno-8-57 href=#__codelineno-8-57></a><span class=w>  </span><span class=nt>failureThreshold</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id=__span-8-58><a id=__codelineno-8-58 name=__codelineno-8-58 href=#__codelineno-8-58></a>
</span><span id=__span-8-59><a id=__codelineno-8-59 name=__codelineno-8-59 href=#__codelineno-8-59></a><span class=nt>readinessProbe</span><span class=p>:</span>
</span><span id=__span-8-60><a id=__codelineno-8-60 name=__codelineno-8-60 href=#__codelineno-8-60></a><span class=w>  </span><span class=nt>httpGet</span><span class=p>:</span>
</span><span id=__span-8-61><a id=__codelineno-8-61 name=__codelineno-8-61 href=#__codelineno-8-61></a><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/ready</span>
</span><span id=__span-8-62><a id=__codelineno-8-62 name=__codelineno-8-62 href=#__codelineno-8-62></a><span class=w>    </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
</span><span id=__span-8-63><a id=__codelineno-8-63 name=__codelineno-8-63 href=#__codelineno-8-63></a><span class=w>  </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</span><span id=__span-8-64><a id=__codelineno-8-64 name=__codelineno-8-64 href=#__codelineno-8-64></a><span class=w>  </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</span><span id=__span-8-65><a id=__codelineno-8-65 name=__codelineno-8-65 href=#__codelineno-8-65></a><span class=w>  </span><span class=nt>timeoutSeconds</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id=__span-8-66><a id=__codelineno-8-66 name=__codelineno-8-66 href=#__codelineno-8-66></a><span class=w>  </span><span class=nt>failureThreshold</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-8-67><a id=__codelineno-8-67 name=__codelineno-8-67 href=#__codelineno-8-67></a>
</span><span id=__span-8-68><a id=__codelineno-8-68 name=__codelineno-8-68 href=#__codelineno-8-68></a><span class=c1># Autoscaling</span>
</span><span id=__span-8-69><a id=__codelineno-8-69 name=__codelineno-8-69 href=#__codelineno-8-69></a><span class=nt>autoscaling</span><span class=p>:</span>
</span><span id=__span-8-70><a id=__codelineno-8-70 name=__codelineno-8-70 href=#__codelineno-8-70></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-8-71><a id=__codelineno-8-71 name=__codelineno-8-71 href=#__codelineno-8-71></a><span class=w>  </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id=__span-8-72><a id=__codelineno-8-72 name=__codelineno-8-72 href=#__codelineno-8-72></a><span class=w>  </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
</span><span id=__span-8-73><a id=__codelineno-8-73 name=__codelineno-8-73 href=#__codelineno-8-73></a><span class=w>  </span><span class=nt>metrics</span><span class=p>:</span>
</span><span id=__span-8-74><a id=__codelineno-8-74 name=__codelineno-8-74 href=#__codelineno-8-74></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Resource</span>
</span><span id=__span-8-75><a id=__codelineno-8-75 name=__codelineno-8-75 href=#__codelineno-8-75></a><span class=w>      </span><span class=nt>resource</span><span class=p>:</span>
</span><span id=__span-8-76><a id=__codelineno-8-76 name=__codelineno-8-76 href=#__codelineno-8-76></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cpu</span>
</span><span id=__span-8-77><a id=__codelineno-8-77 name=__codelineno-8-77 href=#__codelineno-8-77></a><span class=w>        </span><span class=nt>target</span><span class=p>:</span>
</span><span id=__span-8-78><a id=__codelineno-8-78 name=__codelineno-8-78 href=#__codelineno-8-78></a><span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Utilization</span>
</span><span id=__span-8-79><a id=__codelineno-8-79 name=__codelineno-8-79 href=#__codelineno-8-79></a><span class=w>          </span><span class=nt>averageUtilization</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">70</span>
</span><span id=__span-8-80><a id=__codelineno-8-80 name=__codelineno-8-80 href=#__codelineno-8-80></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Resource</span>
</span><span id=__span-8-81><a id=__codelineno-8-81 name=__codelineno-8-81 href=#__codelineno-8-81></a><span class=w>      </span><span class=nt>resource</span><span class=p>:</span>
</span><span id=__span-8-82><a id=__codelineno-8-82 name=__codelineno-8-82 href=#__codelineno-8-82></a><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">memory</span>
</span><span id=__span-8-83><a id=__codelineno-8-83 name=__codelineno-8-83 href=#__codelineno-8-83></a><span class=w>        </span><span class=nt>target</span><span class=p>:</span>
</span><span id=__span-8-84><a id=__codelineno-8-84 name=__codelineno-8-84 href=#__codelineno-8-84></a><span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Utilization</span>
</span><span id=__span-8-85><a id=__codelineno-8-85 name=__codelineno-8-85 href=#__codelineno-8-85></a><span class=w>          </span><span class=nt>averageUtilization</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span></code></pre></div> <h3 id=example-2-chart-lifecycle-management>Example 2: Chart Lifecycle Management<a class=headerlink href=#example-2-chart-lifecycle-management title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=ch>#!/bin/bash</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=c1># chart-lifecycle.sh</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=c1># Lint chart</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Linting chart...&quot;</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>helm<span class=w> </span>lint<span class=w> </span>./mcp-mesh-agent
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=c1># Package chart</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Packaging chart...&quot;</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>helm<span class=w> </span>package<span class=w> </span>./mcp-mesh-agent
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=c1># Test chart</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Testing chart...&quot;</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>helm<span class=w> </span>install<span class=w> </span>test-release<span class=w> </span>./mcp-mesh-agent<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=w>  </span>--dry-run<span class=w> </span>--debug<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=w>  </span>--generate-name
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=c1># Security scan</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Security scanning...&quot;</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a>helm<span class=w> </span>template<span class=w> </span>./mcp-mesh-agent<span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a><span class=w>  </span>kubesec<span class=w> </span>scan<span class=w> </span>-
</span><span id=__span-9-22><a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a>
</span><span id=__span-9-23><a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a><span class=c1># Sign chart</span>
</span><span id=__span-9-24><a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Signing chart...&quot;</span>
</span><span id=__span-9-25><a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a>helm<span class=w> </span>gpg<span class=w> </span>sign<span class=w> </span>./mcp-mesh-agent-*.tgz
</span><span id=__span-9-26><a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a>
</span><span id=__span-9-27><a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a><span class=c1># Push to registry</span>
</span><span id=__span-9-28><a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Pushing to registry...&quot;</span>
</span><span id=__span-9-29><a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a>helm<span class=w> </span>push<span class=w> </span>mcp-mesh-agent-*.tgz<span class=w> </span>oci://registry.mcp-mesh.io/charts
</span></code></pre></div> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2> <ol> <li><strong>Use Subcharts</strong>: Create modular, reusable components</li> <li><strong>Version Everything</strong>: Pin all versions (charts, images, dependencies)</li> <li><strong>Test Thoroughly</strong>: Unit tests, integration tests, upgrade tests</li> <li><strong>Document Extensively</strong>: README, NOTES.txt, inline comments</li> <li><strong>Secure by Default</strong>: Minimal permissions, network policies</li> </ol> <h2 id=common-pitfalls>Common Pitfalls<a class=headerlink href=#common-pitfalls title="Permanent link">&para;</a></h2> <h3 id=pitfall-1-hardcoded-values>Pitfall 1: Hardcoded Values<a class=headerlink href=#pitfall-1-hardcoded-values title="Permanent link">&para;</a></h3> <p><strong>Problem</strong>: Values hardcoded in templates</p> <p><strong>Solution</strong>: Always parameterize:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1># Bad</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mcp-mesh/agent:1.0.0</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=c1># Good</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{%</span><span class=nv> </span><span class=s>raw</span><span class=nv> </span><span class=s>%}{{</span><span class=nv> </span><span class=s>.Values.image.repository</span><span class=nv> </span><span class=s>}}{%</span><span class=nv> </span><span class=s>endraw</span><span class=nv> </span><span class=s>%}:{%</span><span class=nv> </span><span class=s>raw</span><span class=nv> </span><span class=s>%}{{</span><span class=nv> </span><span class=s>.Values.image.tag</span><span class=nv> </span><span class=s>|</span><span class=nv> </span><span class=s>default</span><span class=nv> </span><span class=s>.Chart.AppVersion</span><span class=nv> </span><span class=s>}}{%</span><span class=nv> </span><span class=s>endraw</span><span class=nv> </span><span class=s>%}&quot;</span>
</span></code></pre></div> <h3 id=pitfall-2-missing-resource-limits>Pitfall 2: Missing Resource Limits<a class=headerlink href=#pitfall-2-missing-resource-limits title="Permanent link">&para;</a></h3> <p><strong>Problem</strong>: Pods without resource constraints</p> <p><strong>Solution</strong>: Always set defaults:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># values.yaml</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=nt>resources</span><span class=p>:</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=nt>limits</span><span class=p>:</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">500m</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">512Mi</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>  </span><span class=nt>requests</span><span class=p>:</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>    </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">100m</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>    </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">128Mi</span>
</span></code></pre></div> <h2 id=testing>Testing<a class=headerlink href=#testing title="Permanent link">&para;</a></h2> <h3 id=chart-unit-testing>Chart Unit Testing<a class=headerlink href=#chart-unit-testing title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># tests/deployment_test.yaml</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=nt>suite</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test deployment</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=nt>templates</span><span class=p>:</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">deployment.yaml</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=nt>tests</span><span class=p>:</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>it</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">should create deployment with correct name</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>    </span><span class=nt>asserts</span><span class=p>:</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>isKind</span><span class=p>:</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>          </span><span class=nt>of</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>equal</span><span class=p>:</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">metadata.name</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">RELEASE-NAME-mcp-mesh-agent</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>it</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">should have security context</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>    </span><span class=nt>asserts</span><span class=p>:</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>isNotNull</span><span class=p>:</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">spec.template.spec.securityContext</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>equal</span><span class=p>:</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">spec.template.spec.securityContext.runAsNonRoot</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a>
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>it</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">should have resource limits</span>
</span><span id=__span-12-23><a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a><span class=w>    </span><span class=nt>asserts</span><span class=p>:</span>
</span><span id=__span-12-24><a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>isNotNull</span><span class=p>:</span>
</span><span id=__span-12-25><a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">spec.template.spec.containers[0].resources.limits</span>
</span><span id=__span-12-26><a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>exists</span><span class=p>:</span>
</span><span id=__span-12-27><a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">spec.template.spec.containers[0].resources.limits.memory</span>
</span></code></pre></div> <h3 id=integration-testing>Integration Testing<a class=headerlink href=#integration-testing title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># test_helm_deployment.py</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=kn>import</span><span class=w> </span><span class=nn>subprocess</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=kn>import</span><span class=w> </span><span class=nn>json</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=kn>import</span><span class=w> </span><span class=nn>time</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=kn>import</span><span class=w> </span><span class=nn>pytest</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=k>def</span><span class=w> </span><span class=nf>helm_install</span><span class=p>(</span><span class=n>release_name</span><span class=p>,</span> <span class=n>namespace</span><span class=p>):</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Install Helm chart&quot;&quot;&quot;</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>    <span class=n>cmd</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>        <span class=s2>&quot;helm&quot;</span><span class=p>,</span> <span class=s2>&quot;install&quot;</span><span class=p>,</span> <span class=n>release_name</span><span class=p>,</span> <span class=s2>&quot;./mcp-mesh-agent&quot;</span><span class=p>,</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>        <span class=s2>&quot;--namespace&quot;</span><span class=p>,</span> <span class=n>namespace</span><span class=p>,</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>        <span class=s2>&quot;--create-namespace&quot;</span><span class=p>,</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>        <span class=s2>&quot;--wait&quot;</span><span class=p>,</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>        <span class=s2>&quot;--timeout&quot;</span><span class=p>,</span> <span class=s2>&quot;5m&quot;</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>    <span class=p>]</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>cmd</span><span class=p>,</span> <span class=n>check</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a><span class=k>def</span><span class=w> </span><span class=nf>test_production_deployment</span><span class=p>():</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Test production-ready deployment&quot;&quot;&quot;</span>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a>    <span class=n>namespace</span> <span class=o>=</span> <span class=s2>&quot;test-prod&quot;</span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a>    <span class=n>release</span> <span class=o>=</span> <span class=s2>&quot;test-release&quot;</span>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a>
</span><span id=__span-13-23><a id=__codelineno-13-23 name=__codelineno-13-23 href=#__codelineno-13-23></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-13-24><a id=__codelineno-13-24 name=__codelineno-13-24 href=#__codelineno-13-24></a>        <span class=c1># Install with production values</span>
</span><span id=__span-13-25><a id=__codelineno-13-25 name=__codelineno-13-25 href=#__codelineno-13-25></a>        <span class=n>helm_install</span><span class=p>(</span><span class=n>release</span><span class=p>,</span> <span class=n>namespace</span><span class=p>)</span>
</span><span id=__span-13-26><a id=__codelineno-13-26 name=__codelineno-13-26 href=#__codelineno-13-26></a>
</span><span id=__span-13-27><a id=__codelineno-13-27 name=__codelineno-13-27 href=#__codelineno-13-27></a>        <span class=c1># Verify deployment</span>
</span><span id=__span-13-28><a id=__codelineno-13-28 name=__codelineno-13-28 href=#__codelineno-13-28></a>        <span class=n>cmd</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;kubectl get deployment -n </span><span class=si>{</span><span class=n>namespace</span><span class=si>}</span><span class=s2> -o json&quot;</span>
</span><span id=__span-13-29><a id=__codelineno-13-29 name=__codelineno-13-29 href=#__codelineno-13-29></a>        <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>cmd</span><span class=o>.</span><span class=n>split</span><span class=p>(),</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-13-30><a id=__codelineno-13-30 name=__codelineno-13-30 href=#__codelineno-13-30></a>        <span class=n>deployments</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span><span id=__span-13-31><a id=__codelineno-13-31 name=__codelineno-13-31 href=#__codelineno-13-31></a>
</span><span id=__span-13-32><a id=__codelineno-13-32 name=__codelineno-13-32 href=#__codelineno-13-32></a>        <span class=k>assert</span> <span class=nb>len</span><span class=p>(</span><span class=n>deployments</span><span class=p>[</span><span class=s1>&#39;items&#39;</span><span class=p>])</span> <span class=o>&gt;</span> <span class=mi>0</span>
</span><span id=__span-13-33><a id=__codelineno-13-33 name=__codelineno-13-33 href=#__codelineno-13-33></a>
</span><span id=__span-13-34><a id=__codelineno-13-34 name=__codelineno-13-34 href=#__codelineno-13-34></a>        <span class=c1># Check security context</span>
</span><span id=__span-13-35><a id=__codelineno-13-35 name=__codelineno-13-35 href=#__codelineno-13-35></a>        <span class=n>deployment</span> <span class=o>=</span> <span class=n>deployments</span><span class=p>[</span><span class=s1>&#39;items&#39;</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>
</span><span id=__span-13-36><a id=__codelineno-13-36 name=__codelineno-13-36 href=#__codelineno-13-36></a>        <span class=n>security_context</span> <span class=o>=</span> <span class=n>deployment</span><span class=p>[</span><span class=s1>&#39;spec&#39;</span><span class=p>][</span><span class=s1>&#39;template&#39;</span><span class=p>][</span><span class=s1>&#39;spec&#39;</span><span class=p>][</span><span class=s1>&#39;securityContext&#39;</span><span class=p>]</span>
</span><span id=__span-13-37><a id=__codelineno-13-37 name=__codelineno-13-37 href=#__codelineno-13-37></a>        <span class=k>assert</span> <span class=n>security_context</span><span class=p>[</span><span class=s1>&#39;runAsNonRoot&#39;</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>True</span>
</span><span id=__span-13-38><a id=__codelineno-13-38 name=__codelineno-13-38 href=#__codelineno-13-38></a>
</span><span id=__span-13-39><a id=__codelineno-13-39 name=__codelineno-13-39 href=#__codelineno-13-39></a>        <span class=c1># Check resource limits</span>
</span><span id=__span-13-40><a id=__codelineno-13-40 name=__codelineno-13-40 href=#__codelineno-13-40></a>        <span class=n>containers</span> <span class=o>=</span> <span class=n>deployment</span><span class=p>[</span><span class=s1>&#39;spec&#39;</span><span class=p>][</span><span class=s1>&#39;template&#39;</span><span class=p>][</span><span class=s1>&#39;spec&#39;</span><span class=p>][</span><span class=s1>&#39;containers&#39;</span><span class=p>]</span>
</span><span id=__span-13-41><a id=__codelineno-13-41 name=__codelineno-13-41 href=#__codelineno-13-41></a>        <span class=k>assert</span> <span class=nb>all</span><span class=p>(</span><span class=s1>&#39;resources&#39;</span> <span class=ow>in</span> <span class=n>c</span> <span class=ow>and</span> <span class=s1>&#39;limits&#39;</span> <span class=ow>in</span> <span class=n>c</span><span class=p>[</span><span class=s1>&#39;resources&#39;</span><span class=p>]</span>
</span><span id=__span-13-42><a id=__codelineno-13-42 name=__codelineno-13-42 href=#__codelineno-13-42></a>                  <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>containers</span><span class=p>)</span>
</span><span id=__span-13-43><a id=__codelineno-13-43 name=__codelineno-13-43 href=#__codelineno-13-43></a>
</span><span id=__span-13-44><a id=__codelineno-13-44 name=__codelineno-13-44 href=#__codelineno-13-44></a>    <span class=k>finally</span><span class=p>:</span>
</span><span id=__span-13-45><a id=__codelineno-13-45 name=__codelineno-13-45 href=#__codelineno-13-45></a>        <span class=c1># Cleanup</span>
</span><span id=__span-13-46><a id=__codelineno-13-46 name=__codelineno-13-46 href=#__codelineno-13-46></a>        <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span>
</span><span id=__span-13-47><a id=__codelineno-13-47 name=__codelineno-13-47 href=#__codelineno-13-47></a>            <span class=s2>&quot;helm&quot;</span><span class=p>,</span> <span class=s2>&quot;uninstall&quot;</span><span class=p>,</span> <span class=n>release</span><span class=p>,</span> <span class=s2>&quot;-n&quot;</span><span class=p>,</span> <span class=n>namespace</span>
</span><span id=__span-13-48><a id=__codelineno-13-48 name=__codelineno-13-48 href=#__codelineno-13-48></a>        <span class=p>])</span>
</span></code></pre></div> <h2 id=monitoring-and-debugging>Monitoring and Debugging<a class=headerlink href=#monitoring-and-debugging title="Permanent link">&para;</a></h2> <h3 id=monitor-chart-performance>Monitor Chart Performance<a class=headerlink href=#monitor-chart-performance title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1># Measure template rendering time</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=nb>time</span><span class=w> </span>helm<span class=w> </span>template<span class=w> </span>large-release<span class=w> </span>./mcp-mesh-platform<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span>-f<span class=w> </span>values-production.yaml<span class=w> </span>&gt;<span class=w> </span>/dev/null
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=c1># Check rendered size</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>helm<span class=w> </span>template<span class=w> </span>large-release<span class=w> </span>./mcp-mesh-platform<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>  </span>-f<span class=w> </span>values-production.yaml<span class=w> </span><span class=p>|</span><span class=w> </span>wc<span class=w> </span>-c
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=c1># Profile template execution</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>helm<span class=w> </span>template<span class=w> </span>large-release<span class=w> </span>./mcp-mesh-platform<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>  </span>--debug<span class=w> </span><span class=m>2</span>&gt;<span class=p>&amp;</span><span class=m>1</span><span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-E<span class=w> </span><span class=s2>&quot;took|duration&quot;</span>
</span></code></pre></div> <h3 id=debug-chart-issues>Debug Chart Issues<a class=headerlink href=#debug-chart-issues title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1># Enable debug output</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>helm<span class=w> </span>install<span class=w> </span>my-release<span class=w> </span>./mcp-mesh-agent<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>  </span>--debug<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>  </span>--dry-run
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=c1># Check computed values</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-release<span class=w> </span>--all
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=c1># Verify hooks</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a>helm<span class=w> </span>get<span class=w> </span>hooks<span class=w> </span>my-release
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=c1># List all resources</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>helm<span class=w> </span>get<span class=w> </span>manifest<span class=w> </span>my-release<span class=w> </span><span class=p>|</span><span class=w> </span>kubectl<span class=w> </span>get<span class=w> </span>-f<span class=w> </span>-
</span></code></pre></div> <h2 id=troubleshooting>üîß Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <h3 id=issue-1-schema-validation-failures>Issue 1: Schema Validation Failures<a class=headerlink href=#issue-1-schema-validation-failures title="Permanent link">&para;</a></h3> <p><strong>Symptoms</strong>: <code>values don't meet the specifications of the schema</code></p> <p><strong>Cause</strong>: Values don't match schema</p> <p><strong>Solution</strong>:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1># Validate values against schema</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>helm<span class=w> </span>lint<span class=w> </span>./mcp-mesh-agent<span class=w> </span>--strict
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=c1># Test specific values file</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>helm<span class=w> </span>template<span class=w> </span>./mcp-mesh-agent<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>  </span>-f<span class=w> </span>values-custom.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>  </span>--validate
</span></code></pre></div> <h3 id=issue-2-template-rendering-slow>Issue 2: Template Rendering Slow<a class=headerlink href=#issue-2-template-rendering-slow title="Permanent link">&para;</a></h3> <p><strong>Symptoms</strong>: Long deployment times</p> <p><strong>Cause</strong>: Inefficient templates</p> <p><strong>Solution</strong>:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1># Cache computed values</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- $fullname</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= include &quot;chart.fullname&quot; . -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- $labels</span><span class=w> </span><span class="p p-Indicator">:</span><span class=nv>= include &quot;chart.labels&quot; . -</span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=c1># Reuse throughout template</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=w> </span><span class=nv>$fullname</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=w>  </span><span class="p p-Indicator">{</span><span class=err>%</span><span class=w> </span><span class=nv>raw %</span><span class="p p-Indicator">}{{</span><span class=nv>- $labels | nindent 4</span><span class=w> </span><span class="p p-Indicator">}}{</span><span class=err>%</span><span class=w> </span><span class=nv>endraw %</span><span class="p p-Indicator">}</span>
</span></code></pre></div> <p>For more issues, see the <a href=../troubleshooting/ >section troubleshooting guide</a>.</p> <h2 id=known-limitations>‚ö†Ô∏è Known Limitations<a class=headerlink href=#known-limitations title="Permanent link">&para;</a></h2> <ul> <li><strong>ConfigMap Size</strong>: Limited to 1MB for rendered templates</li> <li><strong>CRD Ordering</strong>: CRDs must be installed before use</li> <li><strong>Hooks Limitations</strong>: Limited hook weights (pre/post)</li> <li><strong>Cross-Namespace</strong>: Helm doesn't manage cross-namespace resources well</li> </ul> <h2 id=todo>üìù TODO<a class=headerlink href=#todo title="Permanent link">&para;</a></h2> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Add mutation webhook examples</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Create Helm plugin for MCP Mesh</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Document OPA policy integration</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Add cost optimization practices</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Create security scanning automation</li> </ul> <h2 id=summary>Summary<a class=headerlink href=#summary title="Permanent link">&para;</a></h2> <p>You now understand Helm best practices for production:</p> <p>Key takeaways:</p> <ul> <li>üîë Follow chart development standards</li> <li>üîë Implement comprehensive security</li> <li>üîë Optimize performance</li> <li>üîë Test thoroughly at all levels</li> </ul> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">&para;</a></h2> <p>Return to the Helm deployment overview or explore troubleshooting.</p> <p>Continue to <a href=../troubleshooting/ >Troubleshooting Guide</a> ‚Üí</p> <hr> <p>üí° <strong>Tip</strong>: Use <code>helm create</code> with a custom starter: <code>helm create mychart --starter mcp-mesh-starter</code></p> <p>üìö <strong>Reference</strong>: <a href=https://helm.sh/docs/chart_best_practices/ >Helm Best Practices Guide</a></p> <p>üß™ <strong>Try It</strong>: Create a production-ready chart for your own agent following these practices</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="October 1, 2025 01:34:08 UTC"><span class=timeago datetime=2025-10-01T01:34:08+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="October 1, 2025 01:34:08 UTC">2025-10-01</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="June 12, 2025 18:17:58 UTC"><span class=timeago datetime=2025-06-12T18:17:58+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="June 12, 2025 18:17:58 UTC">2025-06-12</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../04-multi-environment/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Multi-Environment"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Multi-Environment </div> </div> </a> <a href=../troubleshooting/ class="md-footer__link md-footer__link--next" aria-label="Next: Troubleshooting"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Troubleshooting </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024-2025 MCP Mesh Contributors </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/dhyansraj/mcp-mesh target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://discord.gg/KDFDREphWn target=_blank rel=noopener title=discord.gg class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://pypi.org/project/mcp-mesh/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.e71a0d61.min.js></script> <script src=../../js/timeago.min.js></script> <script src=../../js/timeago_mkdocs_material.js></script> <script src=../../assets/javascripts/extra.js></script> </body> </html>