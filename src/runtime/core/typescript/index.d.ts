/* tslint:disable */
/* eslint-disable */

/* auto-generated by NAPI-RS */

/** Dependency specification for TypeScript. */
export interface JsDependencySpec {
  /** Capability name to depend on */
  capability: string
  /** Tags for filtering (e.g., ["+fast", "-deprecated"]) */
  tags: Array<string>
  /** Version constraint (e.g., ">=2.0.0") */
  version?: string
}
/** Tool specification for TypeScript. */
export interface JsToolSpec {
  /** Function name in the code */
  functionName: string
  /** Capability name for discovery */
  capability: string
  /** Version of this capability */
  version: string
  /** Tags for filtering */
  tags: Array<string>
  /** Human-readable description */
  description: string
  /** Dependencies required by this tool */
  dependencies: Array<JsDependencySpec>
  /** JSON Schema for input parameters (MCP format) - serialized JSON string */
  inputSchema?: string
}
/** Agent specification for TypeScript. */
export interface JsAgentSpec {
  /** Unique agent name/identifier */
  name: string
  /** Agent version (semver) */
  version: string
  /** Human-readable description */
  description: string
  /** Registry URL (e.g., "http://localhost:8100") */
  registryUrl: string
  /** HTTP port for this agent */
  httpPort: number
  /** HTTP host announced to registry */
  httpHost: string
  /** Namespace for isolation */
  namespace: string
  /** Tools/capabilities provided by this agent */
  tools: Array<JsToolSpec>
  /** Heartbeat interval in seconds */
  heartbeatInterval: number
}
/** Mesh event for TypeScript. */
export interface JsMeshEvent {
  /** Event type (e.g., "dependency_available", "agent_registered") */
  eventType: string
  /** Capability name (for dependency events) */
  capability?: string
  /** Endpoint URL (for dependency_available) */
  endpoint?: string
  /** Function name to call (for dependency_available) */
  functionName?: string
  /** Agent ID (for dependency events) */
  agentId?: string
  /** Function that requested this dependency (for dependency events) */
  requestingFunction?: string
  /** Dependency index within the requesting function (for dependency events) */
  depIndex?: number
  /** Function ID of the LLM agent (for llm_tools_updated) */
  functionId?: string
  /** Error message (for error events) */
  error?: string
  /** Reason for event (for disconnect events) */
  reason?: string
}
/**
 * Start an agent runtime with the given specification.
 *
 * This spawns a background Tokio runtime that handles:
 * - Registration with the mesh registry
 * - Periodic heartbeats
 * - Topology change detection
 * - Event streaming
 */
export declare function startAgent(spec: JsAgentSpec): JsAgentHandle
/**
 * Resolve configuration value with priority: ENV > param > default.
 *
 * @param keyName - Config key (e.g., "registry_url", "http_host", "namespace")
 * @param paramValue - Optional value from code/config
 * @returns Resolved value or empty string if unknown key
 */
export declare function resolveConfig(keyName: string, paramValue?: string | undefined | null): string
/**
 * Resolve boolean configuration value with priority: ENV > param > default.
 *
 * @param keyName - Config key (e.g., "distributed_tracing_enabled")
 * @param paramValue - Optional value from code/config
 * @returns Resolved boolean value
 */
export declare function resolveConfigBool(keyName: string, paramValue?: boolean | undefined | null): boolean
/**
 * Resolve integer configuration value with priority: ENV > param > default.
 *
 * @param keyName - Config key (e.g., "http_port", "health_interval")
 * @param paramValue - Optional value from code/config
 * @returns Resolved integer value or null if unknown key
 */
export declare function resolveConfigInt(keyName: string, paramValue?: number | undefined | null): number | null
/**
 * Check if distributed tracing is enabled.
 *
 * Checks MCP_MESH_DISTRIBUTED_TRACING_ENABLED environment variable.
 */
export declare function isTracingEnabled(): boolean
/** Get Redis URL with fallback to default (redis://localhost:6379). */
export declare function getRedisUrl(): string
/**
 * Auto-detect external IP address.
 *
 * Uses UDP socket trick to find the IP that would route to external networks.
 * Falls back to "localhost" if detection fails.
 */
export declare function autoDetectIp(): string
/**
 * Initialize the trace publisher.
 *
 * Must be called before publishing spans. Checks if tracing is enabled
 * and initializes Redis connection.
 *
 * @returns true if tracing is enabled and Redis is available, false otherwise.
 */
export declare function initTracePublisher(): Promise<boolean>
/**
 * Publish a trace span to Redis.
 *
 * Publishes span data to the `mesh:trace` Redis stream.
 * Non-blocking - silently handles failures to never break agent operations.
 *
 * @param spanData - Map of span data (all values must be strings)
 * @returns true if published successfully, false otherwise.
 */
export declare function publishSpan(spanData: Record<string, string>): Promise<boolean>
/**
 * Check if trace publishing is available.
 *
 * @returns true if tracing is enabled and Redis is connected.
 */
export declare function isTracePublisherAvailable(): Promise<boolean>
/** Handle to a running agent runtime (TypeScript wrapper). */
export declare class JsAgentHandle {
  /**
   * Wait for and return the next mesh event.
   *
   * This is an async method that blocks until an event is available.
   * Returns a JsMeshEvent with eventType "shutdown" when the runtime has shut down.
   */
  nextEvent(): Promise<JsMeshEvent>
  /**
   * Get current dependency endpoints.
   *
   * Returns an object mapping capability names to endpoint URLs.
   */
  getDependencies(): Promise<Record<string, string>>
  /** Get current agent health status. */
  getStatus(): Promise<string>
  /** Get the agent ID assigned by the registry. */
  getAgentId(): Promise<string | null>
  /** Check if shutdown has been requested. */
  isShutdownRequested(): Promise<boolean>
  /** Request graceful shutdown of the agent runtime. */
  shutdown(): Promise<void>
}
